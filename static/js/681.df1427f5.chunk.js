"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[681],{4681:function(e,t,n){n.r(t),n.d(t,{default:function(){return Ht}});var i=n(2791),a=n(586),r=n(3388),l=n(7888),s=n(1087),o=n(7689),d=n(8935),c=n(7309),u=n(184);function h(){return(0,u.jsx)(d.ZP,{status:"404",title:"404",subTitle:"Sorry, the page you visited does not exist.",extra:(0,u.jsx)(s.rU,{to:"/",children:(0,u.jsx)(c.Z,{type:"primary",children:"Back Home"})})})}var p=n(7063),x=n(1413),f=n(9439),m=n(2339),Z=n(5820),v=n(8302),j=n(5086),g=n(7615),y=n(6106),b=n(914),C=n(6818),I=n(9998),S=n(43),k=n(9389),w=n(1717),D=n(2622),T=n(1752),R=n(9286),P=n(7106),U=n(5671),N=n(3144),A=n(313),O=function(){function e(){(0,U.Z)(this,e)}return(0,N.Z)(e,null,[{key:"list",value:function(e){return A.Z.get("coupon/list",{params:e})}},{key:"save",value:function(e,t){return A.Z.post("coupon/save",e,{params:t})}},{key:"delete",value:function(e){return A.Z.post("coupon/delete",{ids:e})}},{key:"details",value:function(e){return A.Z.get("coupon/details/"+e)}}]),e}();O.baseURL="";var L=function(){function e(){(0,U.Z)(this,e)}return(0,N.Z)(e,null,[{key:"listUser",value:function(e){return A.Z.get(this.baseURL+"/list-user",{params:e})}},{key:"saveUser",value:function(e){return A.Z.post(this.baseURL+"/save-user",e)}},{key:"deleteUser",value:function(e){return A.Z.post(this.baseURL+"/delete-user",{ids:e})}}]),e}();L.baseURL="user";var F=n(4099);function _(e){var t=e.qData,n=e.setQData;return(0,u.jsx)(u.Fragment,{children:t.total>0?(0,u.jsx)(F.Z,{total:t.total,showTotal:function(){var e=(t.page-1)*t.limit*1+1,n=t.page*t.limit;return(0,u.jsx)(m.Z,{children:"Showing "+e+" - "+n+" out of "+t.total})},pageSize:t.limit,current:t.page,onChange:function(e,i){t.limit!==i?n((0,x.Z)((0,x.Z)({},t),{},{page:1,limit:i})):n((0,x.Z)((0,x.Z)({},t),{},{page:e}))},showSizeChanger:!0}):null})}var q=n(2426),z=n.n(q),B=n(7027);function E(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";e&&("success"===t&&B.ZP.success(e),"error"===t&&B.ZP.error(e),"warning"===t&&B.ZP.warning(e))}var M=n(7892),Y=n.n(M),Q=n(151);function H(){var e=(0,i.useState)([]),t=(0,f.Z)(e,2),n=t[0],a=t[1],r=(0,i.useState)(!1),l=(0,f.Z)(r,2),s=l[0],o=l[1],d=(0,i.useState)([]),h=(0,f.Z)(d,2),p=h[0],g=h[1],y=(0,i.useState)({page:1,limit:20}),b=(0,f.Z)(y,2),C=b[0],I=b[1],S=(0,i.useState)([]),k=(0,f.Z)(S,2),w=k[0],R=k[1],P=(0,i.useRef)(),U=[{title:"#",width:30,render:function(e,t,n){return(0,u.jsx)("b",{children:n+1})}},{title:"Title",dataIndex:"title"},{title:"User",dataIndex:"userDetails",width:250,render:function(e){return e.map((function(e){return(0,u.jsx)(m.Z,{children:e.name||"UNKNOWN"},e._id)}))}},{title:"Code",width:100,dataIndex:"code"},{title:"EndDate",width:100,dataIndex:"expiryDate",render:function(e,t){return(0,u.jsx)("span",{children:z()(e).format("DD MMM YYYY")})}},{title:"Discount Value",dataIndex:"discountValue",width:120,render:function(e,t){return"flat"===t.discountType?(0,u.jsxs)("b",{children:["\u20b9 ",e]}):(0,u.jsxs)("b",{children:[e," %"]})}},{title:"Coupon Use",width:100,dataIndex:"typeOfUse"},{title:"Status",dataIndex:"status",width:60,render:function(e){return e?(0,u.jsx)(m.Z,{color:"green",children:"Active"}):(0,u.jsx)(m.Z,{color:"red",children:"Inactive"})}},{title:"Action",dataIndex:"_id",width:70,render:function(e,t){return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(Z.Z,{title:"Are you sure to delete this User?",onConfirm:function(){A(t._id)},okText:"Yes",cancelText:"No",children:[(0,u.jsx)(c.Z,{type:"primary",size:"small",danger:!0,icon:(0,u.jsx)(D.Z,{})}),"\xa0"]}),(0,u.jsx)(c.Z,{type:"primary",size:"small",icon:(0,u.jsx)(T.Z,{}),onClick:function(){P.current.openForm(t)}})]})}}].filter((function(e){return!e.hidden}));function N(){o(!0),O.list(C).then((function(e){var t;a(null===(t=e.data)||void 0===t?void 0:t.map((function(e){return(0,x.Z)({key:e._id},e)})).reverse()),I((0,x.Z)((0,x.Z)({},C),{},{limit:e.extra.limit,page:e.extra.page,total:e.extra.total}))})).catch((function(e){})).finally((function(){o(!1)}))}var A=function(e){O.delete(e).then((function(e){E(e.message),N(),g([])})).catch((function(e){E(e.message,"error")}))},F=U.map((function(e){return(0,x.Z)((0,x.Z)({},e),{},{ellipsis:!1})}));F[0].fixed=!0,F[F.length-1].fixed="right";var q={bordered:!0,loading:s,size:"small",title:function(){return(0,u.jsx)(V,{addNewModalRef:P,selected:p,deleteData:A,qData:C,setQData:I,list:N,user:w})},showHeader:!0,footer:function(){return(0,u.jsx)(_,{qData:C,setQData:I})},rowSelection:{onChange:function(e){g(e)}},tableLayout:void 0};return(0,i.useEffect)((function(){N(),L.listUser().then((function(e){R(e.data||[])})).catch((function(e){E("User data not loaded","error")}))}),[C.page,C.limit]),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(v.Z.Title,{level:5,style:{marginTop:0},children:"List of Coupon"}),(0,u.jsx)(j.Z,(0,x.Z)((0,x.Z)({},q),{},{pagination:{position:["none"],pageSize:C.limit},columns:F,dataSource:n.length?n:[],scroll:{y:"calc(100vh - 340px)",x:"calc(100vw - 387px)"}})),(0,u.jsx)(W,{ref:P,list:N,user:w})]})}function V(e){var t=e.addNewModalRef,n=e.selected,a=e.deleteData,r=e.qData,l=(e.setQData,e.list),s=e.user,o=(0,i.useState)([]),d=(0,f.Z)(o,2),h=d[0],p=d[1],x=function(e,t){r[t]=e,void 0===e&&(r[t]="",l())};return(0,i.useEffect)((function(){var e=null===s||void 0===s?void 0:s.map((function(e){return{label:e.name?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("p",{style:{padding:"0px",margin:"0px"},children:e.name}),(0,u.jsx)("p",{style:{fontSize:"12px",margin:"0px"},children:(0,u.jsxs)(v.Z.Text,{type:"danger",children:["@",e.phone]})})]}):e.phone,value:e._id,searchKey:e.name+e.phone}}));p(e)}),[s]),(0,u.jsx)(g.Z,{onSubmitCapture:l,className:"search-form",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{xs:24,xl:4,children:(0,u.jsx)(g.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(C.Z,{showSearch:!0,allowClear:!0,placeholder:"Select by username / phone",optionFilterProp:"children",onChange:function(e){return x(e,"userId")},filterOption:function(e,t){var n;return(null!==(n=null===t||void 0===t?void 0:t.searchKey)&&void 0!==n?n:"").toLowerCase().includes(e.toLowerCase())},options:h})})}),(0,u.jsx)(b.Z,{xs:24,xl:4,children:(0,u.jsx)(g.Z.Item,{children:(0,u.jsxs)(C.Z,{value:r.status,allowClear:!0,placeholder:"Search By Date",onChange:function(e){return x(e,"expiryDate")},children:[(0,u.jsx)(C.Z.Option,{value:"expired",children:"Expired"}),(0,u.jsx)(C.Z.Option,{value:"active",children:"Active"})]})})}),(0,u.jsx)(b.Z,{span:3,children:(0,u.jsx)(g.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(c.Z,{type:"primary",htmlType:"submit",children:"Search"})})}),(0,u.jsxs)(b.Z,{span:5,children:[(0,u.jsx)(g.Z.Item,{style:{marginBottom:0,float:"right"},children:(0,u.jsx)(c.Z,{type:"primary",icon:(0,u.jsx)(R.Z,{}),onClick:function(){t.current.openForm()},children:"Add New"})}),n.length?(0,u.jsx)(Z.Z,{title:"Are you sure to delete these selected images?. Be sure to delete the image from server.",onConfirm:function(){a(n)},okText:"Yes",cancelText:"No",children:(0,u.jsx)(c.Z,{type:"primary",danger:!0,style:{float:"right"},icon:(0,u.jsx)(D.Z,{}),children:"Delete Selected"})}):null]})]})})}var W=(0,i.forwardRef)((function(e,t){var n=e.list,a=e.user,r=(0,i.useState)(!1),l=(0,f.Z)(r,2),s=l[0],o=l[1],d=(0,i.useState)({aspect:1}),h=(0,f.Z)(d,2),p=h[0],m=h[1],Z=(0,i.useState)(!1),j=(0,f.Z)(Z,2),D=j[0],T=j[1],R=function(e){Object.entries(e).forEach((function(e){for(var t=p,n=e[0],i=e[1],a=n.split("."),r=0;r<a.length;r++)r+1===a.length?t[a[r]]=i:("undefined"===typeof t[a[r]]&&(1*parseInt(a[r+1])>=0?t[a[r]]=[]:t[a[r]]={}),t=t[a[r]])})),m((0,x.Z)({},p))};(0,i.useImperativeHandle)(t,(function(){return{openForm:function(e){o(!0),m(e?(0,x.Z)({},e):{discountType:"percent",status:!0})}}}));var U=function(){T(!0),O.save(p).then((function(e){E(e.message),R((0,x.Z)({},e.data)),n(),o(!1)})).catch((function(e){"object"===typeof e.message?E(e.message[Object.keys(e.message)[0]],"error"):E(e.message,"error")})).finally((function(){T(!1)}))};return(0,i.useEffect)((function(){var e;p._id||R({code:null===(e=Q.Z.removeSpecialChars(p.title))||void 0===e?void 0:e.toUpperCase()})}),[p.title]),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(I.Z,{title:(p._id?"Edit":"Add")+" Coupon",style:{top:20},open:s,okText:"Save",onOk:U,okButtonProps:{disabled:D},onCancel:function(){o(!1)},destroyOnClose:!0,maskClosable:!1,width:800,className:"app-modal-body",footer:[(0,u.jsx)(c.Z,{onClick:function(){o(!1)},children:"Cancel"},"cancel"),(0,u.jsx)(c.Z,{type:"primary",onClick:U,children:"Save"},"save")],children:(0,u.jsx)(S.Z,{spinning:D,indicator:(0,u.jsx)(P.Z,{style:{fontSize:24},spin:!0}),children:(0,u.jsx)(g.Z,{layout:"vertical",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(g.Z.Item,{label:"Title",required:!0,children:(0,u.jsx)(k.Z,{placeholder:"Title",value:p.title,onChange:function(e){R({title:e.target.value})}})})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(g.Z.Item,{label:"Code",required:!0,children:(0,u.jsx)(k.Z,{placeholder:"Code",value:p.code,onChange:function(e){var t;R({code:null===(t=Q.Z.removeSpecialChars(e.target.value))||void 0===t?void 0:t.toUpperCase()})}})})}),(0,u.jsx)(b.Z,{span:6,children:(0,u.jsx)(g.Z.Item,{label:"Discount Type",required:!0,children:(0,u.jsxs)(C.Z,{value:p.discountType,onChange:function(e){R({discountType:e})},children:[(0,u.jsx)(C.Z.Option,{value:"percent",children:"Percent"}),(0,u.jsx)(C.Z.Option,{value:"flat",children:"Flat"})]})})}),(0,u.jsx)(b.Z,{span:6,children:(0,u.jsx)(g.Z.Item,{label:"Discount Value",required:!0,children:(0,u.jsx)(k.Z,{type:"number",placeholder:"discountValue",addonBefore:"percent"===p.discountType?"%":"\u20b9",value:p.discountValue,onChange:function(e){"flat"===p.discountType?R({discountValue:e.target.value,maxDiscountValue:e.target.value}):R({discountValue:e.target.value})}})})}),"flat"===p.discountType?(0,u.jsx)(b.Z,{span:6,children:(0,u.jsx)(g.Z.Item,{label:"Max Discount Value",children:(0,u.jsx)(k.Z,{type:"number",placeholder:"Max Discount Price",addonBefore:"\u20b9",value:p.maxDiscountValue,onChange:function(e){R({maxDiscountValue:e.target.value})},disabled:!0})})}):(0,u.jsx)(b.Z,{span:6,children:(0,u.jsx)(g.Z.Item,{label:"Max Discount Value",children:(0,u.jsx)(k.Z,{type:"number",placeholder:"Max Discount Price",addonBefore:"\u20b9",value:p.maxDiscountValue,onChange:function(e){R({maxDiscountValue:e.target.value})}})})}),(0,u.jsx)(b.Z,{span:6,children:(0,u.jsx)(g.Z.Item,{label:"Minimun Order Value",children:(0,u.jsx)(k.Z,{type:"number",placeholder:"Minimun Order Price",addonBefore:"\u20b9",value:p.minimunOrderPrice,onChange:function(e){R({minimunOrderPrice:e.target.value})}})})}),(0,u.jsx)(b.Z,{span:6,children:(0,u.jsx)(g.Z.Item,{label:"Use Type",required:!0,children:(0,u.jsxs)(C.Z,{value:p.typeOfUse,onChange:function(e){R({typeOfUse:e})},children:[(0,u.jsx)(C.Z.Option,{value:"Single",children:"Single Use"}),(0,u.jsx)(C.Z.Option,{value:"Multiple",children:"Multiple Use"})]})})}),(0,u.jsx)(b.Z,{span:18,children:(0,u.jsx)(g.Z.Item,{label:"Choose Users (Don't choose any user if coupon is applicable to all users)",children:(0,u.jsx)(C.Z,{mode:"multiple",value:p.userIds,onChange:function(e){R({userIds:e})},options:a.map((function(e){return{value:e._id,label:(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("p",{style:{padding:"0px",margin:"0px"},children:null===e||void 0===e?void 0:e.name}),(0,u.jsx)("p",{style:{fontSize:"12px",margin:"0px"},children:(0,u.jsxs)(v.Z.Text,{type:"danger",children:["@",null===e||void 0===e?void 0:e.phone]})})]})}}))})})}),(0,u.jsx)(b.Z,{span:8,children:(0,u.jsx)(g.Z.Item,{label:"Expiry Date",required:!0,children:(0,u.jsx)(w.Z,{value:p.expiryDate&&Y()(z()(p.expiryDate).format("YYYY-MM-DD")),format:"DD MMM YYYY",disabledDate:function(e){return e.isBefore(z()(new Date).subtract(1,"day"))},onChange:function(e){R({expiryDate:new Date(e)})},style:{width:"100%"}})})}),(0,u.jsx)(b.Z,{span:8,children:(0,u.jsx)(g.Z.Item,{label:"For First Order",children:(0,u.jsxs)(C.Z,{value:p.forFirst,defaultValue:!1,onChange:function(e){R({forFirst:e})},children:[(0,u.jsx)(C.Z.Option,{value:!0,children:"Yes"}),(0,u.jsx)(C.Z.Option,{value:!1,children:"No"})]})})}),(0,u.jsx)(b.Z,{span:8,children:(0,u.jsx)(g.Z.Item,{label:"Status",required:!0,children:(0,u.jsxs)(C.Z,{value:p.status,onChange:function(e){R({status:e})},children:[(0,u.jsx)(C.Z.Option,{value:!0,children:"Active"}),(0,u.jsx)(C.Z.Option,{value:!1,children:"Inactive"})]})})})]})})})})})})),J=n(6002),K=function(){function e(){(0,U.Z)(this,e)}return(0,N.Z)(e,null,[{key:"detail",value:function(e){return A.Z.get(this.baseURL+"/details/"+e.type)}},{key:"list",value:function(e){return A.Z.get(this.baseURL+"/list",{params:e})}},{key:"save",value:function(e,t){return A.Z.post(this.baseURL+"/save",e,{params:t})}},{key:"delete",value:function(e){return A.Z.post(this.baseURL+"/delete",{ids:e})}}]),e}();K.baseURL="application";var G=n(9687);function X(e){var t=e.height,n=void 0===t?400:t,a=e.menubar,r=void 0!==a&&a,l=e.plugins,s=e.toolbar,o=e.content_style,d=e.initialValue,c=e.onChange;l||(l=["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table paste code help wordcount forecolor backcolor textcolor","image paste table code"]),s||(s="undo redo | formatselect | bold italic backcolor | forecolor emoticons| table tabledelete | tableprops tablerowprops tablecellprops| alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | help | image link | imageupload | code | fullscreen"),o||(o="body { font-family:Helvetica,Arial,sans-serif; font-size:14px }");var h=(0,i.useRef)(null);return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(G.M,{onInit:function(e,t){return h.current=t},initialValue:d,init:{height:n,menubar:r,plugins:l,toolbar:s,content_style:o,file_browser_callback_types:"image",file_picker_callback:function(e,t,n){var i=document.createElement("input");i.setAttribute("type","file"),i.setAttribute("accept","image/*"),i.onchange=function(){var t=this.files[0],n=new FileReader;n.readAsDataURL(t),n.onload=function(){e(n.result,{title:t.name})}},i.click()},deprecation_warnings:!1},onSelectionChange:function(){h.current&&c(h.current.getContent())}})})}function $(){var e=(0,i.useState)({aspect:1}),t=(0,f.Z)(e,2),n=t[0],a=t[1],r=(0,i.useState)(!1),s=(0,f.Z)(r,2),o=s[0],d=s[1],h=(0,i.useState)(0),p=(0,f.Z)(h,2),m=p[0],Z=p[1],v=function(e,t){t&&(Object.entries(e).forEach((function(e){for(var t=n,i=e[0],a=e[1],r=i.split("."),l=0;l<r.length;l++)l+1===r.length?t[r[l]]=a:("undefined"===typeof t[r[l]]&&(1*parseInt(r[l+1])>=0?t[r[l]]=[]:t[r[l]]={}),t=t[r[l]])})),a((0,x.Z)({},n)))},j=function(){d(!0);try{(0===m?K.save((0,x.Z)((0,x.Z)({},n),{},{type:"aboutus",data:n.data})):1===m?K.save((0,x.Z)((0,x.Z)({},n),{},{type:"termcondition",data:n.data})):2===m?K.save((0,x.Z)((0,x.Z)({},n),{},{type:"faq",data:n.data})):4===m?K.save((0,x.Z)((0,x.Z)({},n),{},{type:"privacy-policy",data:n.data})):null).then((function(e){E("msg",e.message),v((0,x.Z)({},e.data)),Z((m+1)%5)})).catch((function(e){"object"===typeof e.message?E(e.message[Object.keys(e.message)[0]],"error"):E(e.message,"error")})).finally((function(){d(!1)}))}catch(e){E(e.message,"error")}},g=function(e){d(!0),K.detail(e).then((function(e){a(e.data||{})})).catch((function(e){E(e.message,"error")})).finally((function(){d(!1)}))};return(0,i.useEffect)((function(){0===m?g({_id:n._id,type:"aboutus"}):1===m?g({_id:n._id,type:"termcondition"}):2===m?g({_id:n._id,type:"faq"}):3===m&&g({_id:n._id,type:"privacy-policy"})}),[m]),(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)(S.Z,{spinning:o,indicator:(0,u.jsx)(P.Z,{style:{fontSize:24},spin:!0}),children:[(0,u.jsx)(J.Z,{activeKey:m,type:"card",size:"small",style:{marginBottom:0},onChange:function(e){Z(e)},items:[{label:"About us",key:0,children:(0,u.jsx)(l.Z,{style:{borderTop:0},children:(0,u.jsx)(ee,{data:n,handleChange:v,save:j})})},{label:"Terms & Condition",key:1,children:(0,u.jsx)(l.Z,{style:{borderTop:0},children:(0,u.jsx)(te,{data:n,handleChange:v,save:j})})},{label:"FAQ",key:2,children:(0,u.jsx)(l.Z,{style:{borderTop:0},children:(0,u.jsx)(ne,{data:n,handleChange:v,save:j})})},{label:"Privacy Policy",key:3,children:(0,u.jsx)(l.Z,{style:{borderTop:0},children:(0,u.jsx)(ie,{data:n,handleChange:v,save:j})})}]}),(0,u.jsx)("div",{style:{display:"flex",flexDirection:"row-reverse",paddingTop:"5px",paddingRight:"70px"},children:(0,u.jsx)(c.Z,{type:"primary",onClick:j,children:4===m?"Save":"Next"},"save")})]})})}var ee=function(e){var t=e.data;e.handleChange;return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(g.Z,{layout:"vertical",children:(0,u.jsx)(y.Z,{gutter:[12,2],children:(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(g.Z.Item,{label:"Data",required:!0,children:(0,u.jsx)(X,{initialValue:void 0===t.data?"":t.data,onChange:function(e){t.data=e}})})})})})})},te=function(e){var t=e.data;e.handleChange;return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(g.Z,{layout:"vertical",children:(0,u.jsx)(y.Z,{gutter:[12,2],children:(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(g.Z.Item,{label:"Data",required:!0,children:(0,u.jsx)(X,{initialValue:void 0===t.data?"":t.data,onChange:function(e){t.data=e}})})})})})})},ne=function(e){var t=e.data;e.handleChange;return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(g.Z,{layout:"vertical",children:(0,u.jsx)(y.Z,{gutter:[12,2],children:(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(g.Z.Item,{label:"Data",required:!0,children:(0,u.jsx)(X,{initialValue:void 0===t.data?"":t.data,onChange:function(e){t.data=e}})})})})})})},ie=function(e){var t=e.data;e.handleChange;return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(g.Z,{layout:"vertical",children:(0,u.jsx)(y.Z,{gutter:[12,2],children:(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(g.Z.Item,{label:"Data",required:!0,children:(0,u.jsx)(X,{initialValue:void 0===t.data?"":t.data,onChange:function(e){t.data=e}})})})})})})},ae=n(3721),re=function(){function e(){(0,U.Z)(this,e)}return(0,N.Z)(e,null,[{key:"list",value:function(e){return A.Z.get(this.baseURL+"category/list",{params:e})}},{key:"save",value:function(e,t){return A.Z.post(this.baseURL+"category/save",e,{params:t})}},{key:"delete",value:function(e){return A.Z.post(this.baseURL+"category/delete",{ids:e})}},{key:"details",value:function(e){return A.Z.get(this.baseURL+"category/details/"+e)}}]),e}();re.baseURL="/ecommerce/";var le=n(4165),se=n(3433),oe=n(5861),de=n(6452),ce=n(5963),ue=function(){function e(){(0,U.Z)(this,e)}return(0,N.Z)(e,null,[{key:"get",value:function(e){return A.Z.get("../"+e)}},{key:"save",value:function(e,t){return A.Z.post(this.baseURL+"/save",e,t)}},{key:"remove",value:function(e){return A.Z.post(this.baseURL+"/remove",e)}}]),e}();ue.baseURL="file";var he=n(2351),pe=function(e){var t=e.fileList,n=e.setFileList,i=e.count,a=void 0===i?1:i,r=e.cropImage,l=void 0===r?null:r,s=e.disabled,o=void 0!==s&&s,d=e.listType,h=void 0===d?"picture-card":d,p=function(){var e=(0,oe.Z)((0,le.Z)().mark((function e(i){var a,r,l,s,o,d;return(0,le.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=i.onSuccess,r=i.onError,l=i.file,s=i.onProgress,o=new FormData,d={onUploadProgress:function(e){s({percent:e.loaded/e.total*100})}},o.append("file",l);try{ue.save(o,d).then((function(e){a("Ok"),n([].concat((0,se.Z)(t),[{uid:e.data.uid,url:e.data.url,name:e.data.name}]))}))}catch(c){r({err:c})}case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(e){e.file;var t=e.fl;typeof t!==typeof[]&&(t=[]),n(t)},f=function(e){ue.remove({uid:e.uid}).then((function(e){}))};return l?(typeof l!==typeof{}&&(l={}),l.aspect=l.aspect||1,l.shape=l.shape||"rect",l.quality=l.quality||1,(0,u.jsx)(ce.Z,{rotate:!0,aspect:!0,shape:l.shape,quality:l.quality,children:(0,u.jsx)(de.Z,{accept:"image/*",customRequest:p,onChange:x,onRemove:f,listType:h,fileList:t,className:"image-upload-grid",disabled:o,children:(null===t||void 0===t?void 0:t.length)>=a?null:"picture"===h?(0,u.jsx)(c.Z,{icon:(0,u.jsx)(he.Z,{}),type:"dashed",children:"Upload"}):(0,u.jsx)("div",{children:"Upload"})})})):(0,u.jsx)(de.Z,{accept:"image/*",customRequest:p,onChange:x,onRemove:f,listType:h,fileList:t,className:"image-upload-grid",disabled:o,children:(null===t||void 0===t?void 0:t.length)>=a?null:"picture"===h?(0,u.jsx)(c.Z,{icon:(0,u.jsx)(he.Z,{}),type:"dashed",children:"Upload"}):(0,u.jsx)("div",{children:"Upload"})})};function xe(e){var t=e.parentId,n=(0,i.useState)([]),a=(0,f.Z)(n,2),r=a[0],l=a[1],s=(0,i.useState)(!1),o=(0,f.Z)(s,2),d=o[0],h=o[1],p=(0,i.useState)([]),g=(0,f.Z)(p,2),y=g[0],b=g[1],C=(0,i.useState)({page:1,limit:20,parentId:t,fileType:"photo"}),I=(0,f.Z)(C,2),S=I[0],k=I[1],w=(0,i.useRef)(),R=(0,i.useRef)(),P=[{title:"#",width:25,render:function(e,t,n){return(0,u.jsx)("b",{children:n+1})}},{title:"Name",dataIndex:"name",width:200},{title:"Image",dataIndex:"img",width:100,render:function(e){return(0,u.jsx)(ae.Z,{src:null===e||void 0===e?void 0:e.url,height:80})}},{title:"Sub-Menu",dataIndex:"lable",width:100,render:function(e,t){return(0,u.jsx)(c.Z,{onClick:function(){R.current.openForm(t)},children:"SubMenu"})}},{title:"Slug",dataIndex:"slug",width:100},{title:"Status",dataIndex:"status",width:80,render:function(e){return e?(0,u.jsx)(m.Z,{color:"green",children:"Active"}):(0,u.jsx)(m.Z,{color:"red",children:"Inactive"})}},{title:"Action",dataIndex:"_id",width:70,render:function(e,t){return(0,u.jsxs)(u.Fragment,{children:[t.isDeletable?(0,u.jsxs)(Z.Z,{title:"Are you sure to delete this data?",onConfirm:function(){N(t._id)},okText:"Yes",cancelText:"No",children:[(0,u.jsx)(c.Z,{type:"primary",size:"small",danger:!0,icon:(0,u.jsx)(D.Z,{})}),"\xa0"]}):null,(0,u.jsx)(c.Z,{type:"primary",size:"small",icon:(0,u.jsx)(T.Z,{}),onClick:function(){w.current.openForm(t._id)}})]})}}].filter((function(e){return!e.hidden}));function U(){h(!0),re.list(S).then((function(e){var t;l(null===(t=e.data)||void 0===t?void 0:t.map((function(e){return(0,x.Z)((0,x.Z)({},e),{},{key:e._id})}))),k((0,x.Z)((0,x.Z)({},S),{},{limit:e.extra.limit,page:e.extra.page,total:e.extra.total}))})).catch((function(e){})).finally((function(){h(!1)}))}var N=function(e){re.delete(e).then((function(e){E(e.message),U(),b([])})).catch((function(e){E(e.message,"error")}))},A=P.map((function(e){return(0,x.Z)((0,x.Z)({},e),{},{ellipsis:!1})}));A[0].fixed=!0,A[A.length-1].fixed="right";var O={bordered:!0,loading:d,size:"small",title:function(){return(0,u.jsx)(fe,{addNewModalRef:w,selected:y,deleteData:N,qData:S,setQData:k,list:U})},showHeader:!0,footer:function(){return(0,u.jsx)(_,{qData:S,setQData:k})},rowSelection:{onChange:function(e){b(e)}},tableLayout:void 0};return(0,i.useEffect)((function(){U()}),[S.page,S.limit]),(0,u.jsxs)(u.Fragment,{children:[t?null:(0,u.jsx)(v.Z.Title,{level:5,style:{marginTop:0},children:"List of Category"}),(0,u.jsx)(j.Z,(0,x.Z)((0,x.Z)({},O),{},{pagination:{position:["none"],pageSize:S.limit},columns:A,dataSource:r.length?r:[],scroll:{y:"calc(100vh - 340px)",x:"calc(100vw - 387px)"}})),(0,u.jsx)(me,{ref:w,list:U,parentId:t}),(0,u.jsx)(Ze,{ref:R})]})}function fe(e){var t=e.addNewModalRef,n=e.selected,i=e.deleteData,a=e.qData,r=(e.setQData,e.list);return(0,u.jsx)(g.Z,{onSubmitCapture:r,className:"search-form",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{xs:{span:24},sm:{span:16},md:{span:10},lg:{span:4},children:(0,u.jsx)(g.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(k.Z,{placeholder:"Search by name or code",value:a.key,onChange:function(e){return t=e.target.value,a[n="key"]=t,void(void 0!==t&&""!==t||(delete a[n],r()));var t,n},allowClear:!0})})}),(0,u.jsx)(b.Z,{span:3,children:(0,u.jsx)(g.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(c.Z,{type:"primary",htmlType:"submit",children:"Search"})})}),(0,u.jsxs)(b.Z,{span:5,children:[(0,u.jsx)(g.Z.Item,{style:{marginBottom:0,float:"right"},children:(0,u.jsx)(c.Z,{type:"primary",icon:(0,u.jsx)(R.Z,{}),onClick:function(){t.current.openForm()},children:"Add New"})}),n.length?(0,u.jsx)(Z.Z,{title:"Are you sure to delete these selected data?",onConfirm:function(){i(n)},okText:"Yes",cancelText:"No",children:(0,u.jsx)(c.Z,{type:"primary",danger:!0,style:{float:"right"},icon:(0,u.jsx)(D.Z,{}),children:"Delete Selected"})}):null]})]})})}var me=(0,i.forwardRef)((function(e,t){var n=e.list,a=e.parentId,r=(0,i.useState)(!1),l=(0,f.Z)(r,2),s=l[0],o=l[1],d=(0,i.useState)({}),h=(0,f.Z)(d,2),p=h[0],m=h[1],Z=(0,i.useState)(!1),v=(0,f.Z)(Z,2),j=v[0],w=v[1],D=(0,i.useState)([]),T=(0,f.Z)(D,2),R=T[0],U=T[1],N=function(e){m((0,x.Z)((0,x.Z)({},p),e))};(0,i.useImperativeHandle)(t,(function(){return{openForm:function(e){o(!0),m(e?{_id:e}:{parentId:a,isTop:!1,fileType:"photo"})}}}));var A=function(){w(!0),re.save(p).then((function(e){E(e.message),N((0,x.Z)({},e.data)),n(),o(!1)})).catch((function(e){"object"===typeof e.message?E(e.message[Object.keys(e.message)[0]],"error"):E(e.message,"error")})).finally((function(){w(!1)}))};return(0,i.useEffect)((function(){p._id&&(w(!0),re.details(p._id).then((function(e){var t,n;m(e.data||{}),U(null!==(t=e.data)&&void 0!==t&&t.img?[null===(n=e.data)||void 0===n?void 0:n.img]:[])})).catch((function(e){E(e.message,"error")})).finally((function(){w(!1)})))}),[p._id]),(0,i.useEffect)((function(){s?U([]):m({_id:null})}),[s]),(0,i.useEffect)((function(){p._id||N({slug:Q.Z.removeSpecialChars(p.name||"")})}),[p.name]),(0,i.useEffect)((function(){N({img:null===R||void 0===R?void 0:R[0]})}),[R]),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(I.Z,{title:(p._id?"Edit":"Add")+" Category",style:{top:20},open:s,okText:"Save",onOk:A,okButtonProps:{disabled:j},onCancel:function(){o(!1)},destroyOnClose:!0,maskClosable:!1,width:500,className:"app-modal-body",footer:[(0,u.jsx)(c.Z,{onClick:function(){o(!1)},children:"Cancel"},"cancel"),(0,u.jsx)(c.Z,{type:"primary",onClick:A,children:"save"},"save")],children:(0,u.jsx)(S.Z,{spinning:j,indicator:(0,u.jsx)(P.Z,{style:{fontSize:24},spin:!0}),children:(0,u.jsx)(g.Z,{layout:"vertical",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(g.Z.Item,{label:"Photo",children:(0,u.jsx)(pe,{fileList:R,setFileList:U,count:1})})}),(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(g.Z.Item,{label:"Name",required:!0,children:(0,u.jsx)(k.Z,{value:p.name,placeholder:"Name...",onChange:function(e){N({name:e.target.value})}})})}),(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(g.Z.Item,{label:"Slug",required:!0,children:(0,u.jsx)(k.Z,{value:p.slug,placeholder:"Slug...",onChange:function(e){N({slug:Q.Z.removeSpecialChars(e.target.value)})}})})}),(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(g.Z.Item,{label:"Specialization",required:!0,children:(0,u.jsxs)(C.Z,{value:p.specialization,onChange:function(e){N({specialization:e})},mode:"multiple",children:[(0,u.jsx)(C.Z.Option,{value:"ocassion",children:"Ocassion"}),(0,u.jsx)(C.Z.Option,{value:"flavour",children:"Flavour"}),(0,u.jsx)(C.Z.Option,{value:"recipient",children:"Recipient"}),(0,u.jsx)(C.Z.Option,{value:"relation",children:"Relation"})]})})}),(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(g.Z.Item,{label:"Status",required:!0,children:(0,u.jsxs)(C.Z,{value:p.status,onChange:function(e){N({status:e})},children:[(0,u.jsx)(C.Z.Option,{value:!0,children:"Active"}),(0,u.jsx)(C.Z.Option,{value:!1,children:"Inactive"})]})})}),(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(g.Z.Item,{label:"Is Deletable",required:!0,children:(0,u.jsxs)(C.Z,{value:p.isDeletable,onChange:function(e){N({isDeletable:e})},children:[(0,u.jsx)(C.Z.Option,{value:!0,children:"Yes"}),(0,u.jsx)(C.Z.Option,{value:!1,children:"No"})]})})})]})})})})})})),Ze=(0,i.forwardRef)((function(e,t){var n=(0,i.useState)(!1),a=(0,f.Z)(n,2),r=a[0],l=a[1],s=(0,i.useState)({}),o=(0,f.Z)(s,2),d=o[0],c=o[1];return(0,i.useImperativeHandle)(t,(function(){return{openForm:function(e){l(!0),c((0,x.Z)({},e))}}})),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(I.Z,{title:(0,u.jsxs)(u.Fragment,{children:["Data of \xa0",(0,u.jsx)("span",{style:{color:"red"},children:d.name})]}),style:{top:20},open:r,onCancel:function(){l(!1)},destroyOnClose:!0,maskClosable:!1,width:1200,className:"app-modal-body",footer:null,children:(0,u.jsx)(xe,{parentId:d._id})})})})),ve=function(){function e(){(0,U.Z)(this,e)}return(0,N.Z)(e,null,[{key:"bannerDetails",value:function(e,t){return A.Z.get(this.baseURL+"/details/"+e,{params:t})}},{key:"bannerList",value:function(e){return A.Z.get(this.baseURL+"/list",{params:e})}},{key:"bannerSave",value:function(e,t){return A.Z.post(this.baseURL+"/save",e,{params:t})}},{key:"bannerDelete",value:function(e){return A.Z.post(this.baseURL+"/delete",{ids:e})}}]),e}();ve.baseURL="banner";var je=function(){function e(){(0,U.Z)(this,e)}return(0,N.Z)(e,null,[{key:"detailProduct",value:function(e,t){return A.Z.get(this.baseURL+"details/"+e,{params:t})}},{key:"listProduct",value:function(e){return A.Z.get(this.baseURL+"list",{params:e})}},{key:"saveProduct",value:function(e,t){return A.Z.post(this.baseURL+"save",e,{params:t})}},{key:"saveAddOnProduct",value:function(e,t){return A.Z.post(this.baseURL+"save-addon",e,{params:t})}},{key:"detailUser",value:function(e,t){return A.Z.get(this.baseURL+"details/"+e,{params:t})}},{key:"listUser",value:function(e){return A.Z.get(this.baseURL+"list",{params:e})}},{key:"saveUser",value:function(e,t){return A.Z.post(this.baseURL+"save",e,{params:t})}},{key:"deleteUser",value:function(e){return A.Z.post(this.baseURL+"delete",{ids:e})}}]),e}();function ge(){var e=(0,i.useState)([]),t=(0,f.Z)(e,2),n=t[0],a=t[1],r=(0,i.useState)(!1),l=(0,f.Z)(r,2),s=l[0],o=l[1],d=(0,i.useState)([]),h=(0,f.Z)(d,2),p=h[0],m=h[1],g=(0,i.useState)([]),y=(0,f.Z)(g,2),b=y[0],C=y[1],I=(0,i.useState)([]),S=(0,f.Z)(I,2),k=S[0],w=S[1],R=(0,i.useState)({page:1,limit:20,fileType:"photo"}),P=(0,f.Z)(R,2),U=P[0],N=P[1],A=(0,i.useRef)(),O=[{title:"#",width:20,render:function(e,t,n){return(0,u.jsx)("b",{children:n+1})}},{title:"Image",dataIndex:"image",width:100,render:function(e){return(0,u.jsx)(ae.Z,{src:e,height:80})}},{title:"Web Image",dataIndex:"webImg",width:100,render:function(e){return(0,u.jsx)(ae.Z,{src:e,height:80})}},{title:"Uploaded At",dataIndex:"createdAt",width:100,render:function(e){return z()(e).format("dddd, MMMM Do YYYY, h:mm:ss a")}},{title:"Action",dataIndex:"_id",width:70,render:function(e,t){return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(Z.Z,{title:"Are you sure to delete this image?. Be sure to delete the image from server.",onConfirm:function(){F(t._id)},okText:"Yes",cancelText:"No",children:[(0,u.jsx)(c.Z,{type:"primary",size:"small",danger:!0,icon:(0,u.jsx)(D.Z,{})}),"\xa0"]}),(0,u.jsx)(c.Z,{type:"primary",size:"small",icon:(0,u.jsx)(T.Z,{}),onClick:function(){A.current.openForm(t._id)}})]})}}].filter((function(e){return!e.hidden}));function L(){o(!0),ve.bannerList(U).then((function(e){var t;a(null===(t=e.data)||void 0===t?void 0:t.map((function(e){return(0,x.Z)((0,x.Z)({},e),{},{key:e._id})}))),N((0,x.Z)((0,x.Z)({},U),{},{limit:e.extra.limit,page:e.extra.page,total:e.extra.total}))})).catch((function(e){})).finally((function(){o(!1)}))}var F=function(e){ve.bannerDelete(e).then((function(e){E(e.message),L(),m([])})).catch((function(e){E(e.message,"error")}))},q=O.map((function(e){return(0,x.Z)((0,x.Z)({},e),{},{ellipsis:!1})}));q[0].fixed=!0,q[q.length-1].fixed="right";var B={bordered:!0,loading:s,size:"small",title:function(){return(0,u.jsx)(ye,{addNewModalRef:A,selected:p,deleteData:F,qData:U,setQData:N,list:L})},showHeader:!0,footer:function(){return(0,u.jsx)(_,{qData:U,setQData:N})},rowSelection:{onChange:function(e){m(e)}},tableLayout:void 0};return(0,i.useEffect)((function(){L()}),[U.page,U.limit]),(0,i.useEffect)((function(){re.list({isAll:1}).then((function(e){C(e.data||[])})),je.listProduct({isAll:1,type:"product"}).then((function(e){w(e.data||[])}))}),[]),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(v.Z.Title,{level:5,children:"List of Banners"}),(0,u.jsx)(j.Z,(0,x.Z)((0,x.Z)({},B),{},{pagination:{position:["none"],pageSize:U.limit},columns:q,dataSource:n.length?n:[],scroll:{y:"calc(100vh - 340px)",x:"calc(100vw - 387px)"}})),(0,u.jsx)(be,{ref:A,list:L,categories:b,products:k})]})}function ye(e){var t=e.addNewModalRef,n=e.selected,i=e.deleteData,a=(e.qData,e.setQData,e.list);return(0,u.jsx)(g.Z,{onSubmitCapture:a,className:"search-form",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{span:4,children:(0,u.jsx)(g.Z.Item,{style:{marginBottom:0}})}),(0,u.jsxs)(b.Z,{span:5,children:[(0,u.jsx)(g.Z.Item,{style:{marginBottom:0,float:"right"},children:(0,u.jsx)(c.Z,{type:"primary",icon:(0,u.jsx)(R.Z,{}),onClick:function(){t.current.openForm()},children:"Add New"})}),n.length?(0,u.jsx)(Z.Z,{title:"Are you sure to delete these selected images?. Be sure to delete the image from server.",onConfirm:function(){i(n)},okText:"Yes",cancelText:"No",children:(0,u.jsx)(c.Z,{type:"primary",danger:!0,style:{float:"right"},icon:(0,u.jsx)(D.Z,{}),children:"Delete Selected"})}):null]})]})})}je.baseURL="ecommerce/product/";var be=(0,i.forwardRef)((function(e,t){var n=e.list,a=e.categories,r=e.products,l=(0,i.useState)(!1),s=(0,f.Z)(l,2),o=s[0],d=s[1],h=(0,i.useState)({aspect:1}),p=(0,f.Z)(h,2),m=p[0],Z=p[1],v=(0,i.useState)(!1),j=(0,f.Z)(v,2),k=j[0],w=j[1],D=(0,i.useState)([]),T=(0,f.Z)(D,2),R=T[0],U=T[1],N=(0,i.useState)([]),A=(0,f.Z)(N,2),O=A[0],L=A[1],F=function(e){Object.entries(e).forEach((function(e){for(var t=m,n=e[0],i=e[1],a=n.split("."),r=0;r<a.length;r++)r+1===a.length?t[a[r]]=i:("undefined"===typeof t[a[r]]&&(1*parseInt(a[r+1])>=0?t[a[r]]=[]:t[a[r]]={}),t=t[a[r]])})),Z((0,x.Z)({},m))};(0,i.useImperativeHandle)(t,(function(){return{openForm:function(e){d(!0),Z(e?{_id:e}:{fileType:"photo"})}}}));var _=function(){w(!0),ve.bannerSave(m).then((function(e){E(e.message),F((0,x.Z)({},e.data)),d(!1),n()})).catch((function(e){"object"===typeof e.message?E(e.message[Object.keys(e.message)[0]],"error"):E(e.message,"error")})).finally((function(){w(!1)}))};return(0,i.useEffect)((function(){m._id&&(w(!0),ve.bannerDetails(m._id).then((function(e){var t,n,i,a;Z(e.data||{}),U(null!==(t=e.data)&&void 0!==t&&t.image?[null===(n=e.data)||void 0===n?void 0:n.image]:[]),L(null!==(i=e.data)&&void 0!==i&&i.webImg?[null===(a=e.data)||void 0===a?void 0:a.webImg]:[])})).catch((function(e){E(e.message,"error")})).finally((function(){w(!1)})))}),[m._id]),(0,i.useEffect)((function(){o?(U([]),L([])):Z({_id:null})}),[o]),(0,i.useEffect)((function(){F({image:null===R||void 0===R?void 0:R[0]})}),[R]),(0,i.useEffect)((function(){F({webImg:null===O||void 0===O?void 0:O[0]})}),[O]),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(I.Z,{title:(m._id?"Edit":"Add")+" Banner",style:{top:20},open:o,okText:"Save",onOk:_,okButtonProps:{disabled:k},onCancel:function(){d(!1)},destroyOnClose:!0,maskClosable:!1,width:500,footer:[(0,u.jsx)(c.Z,{onClick:function(){d(!1)},children:"Cancel"},"cancel"),(0,u.jsx)(c.Z,{type:"primary",onClick:_,children:"Save"},"save")],children:(0,u.jsx)(S.Z,{spinning:k,indicator:(0,u.jsx)(P.Z,{style:{fontSize:24},spin:!0}),children:(0,u.jsx)(g.Z,{layout:"vertical",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(g.Z.Item,{label:"Photo",children:(0,u.jsx)(pe,{fileList:R,setFileList:U,count:1})})}),(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(g.Z.Item,{label:"Web Image",children:(0,u.jsx)(pe,{fileList:O,setFileList:L,count:1})})}),(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(g.Z.Item,{label:"Web Image",children:(0,u.jsx)(C.Z,{value:m.pageCode,onChange:function(e){"pdp"===e?F({pageCode:e,categoryId:null}):"plp"===e&&F({pageCode:e,productId:null})},options:[{label:"Product Details Page",value:"pdp"},{label:"Product List Page",value:"plp"}]})})}),"plp"===m.pageCode?(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(g.Z.Item,{label:"Choose Category",children:(0,u.jsx)(C.Z,{value:m.categoryId,onChange:function(e){F({categoryId:e})},options:a.map((function(e){return{label:e.name,value:e._id}}))})})}):null,"pdp"===m.pageCode?(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(g.Z.Item,{label:"Choose Product",children:(0,u.jsx)(C.Z,{value:m.productId,onChange:function(e){F({productId:e})},options:r.map((function(e){return{label:e.name,value:e._id}}))})})}):null]})})})})})})),Ce=function(){function e(){(0,U.Z)(this,e)}return(0,N.Z)(e,null,[{key:"detailUser",value:function(e,t){return A.Z.get(this.baseURL+"/details-user/"+e,{params:t})}},{key:"listUser",value:function(e){return A.Z.get(this.baseURL+"/list-user",{params:e})}},{key:"saveUser",value:function(e,t){return A.Z.post(this.baseURL+"/save-user",e,{params:t})}},{key:"deleteUser",value:function(e){return A.Z.post(this.baseURL+"/delete-user",{ids:e})}}]),e}();Ce.baseURL="user";var Ie=function(){function e(){(0,U.Z)(this,e)}return(0,N.Z)(e,null,[{key:"detailJob",value:function(e,t){return A.Z.get(this.baseURL+"/address/details"+e,{params:t})}},{key:"listJob",value:function(e){return A.Z.get(this.baseURL+"/address/list",{params:e})}},{key:"saveJob",value:function(e,t){return A.Z.post(this.baseURL+"/address/save",e,{params:t})}},{key:"deleteJob",value:function(e){return A.Z.post(this.baseURL+"/address/delete",{ids:e})}}]),e}();function Se(e){var t=e.userId,n=(0,i.useState)([]),a=(0,f.Z)(n,2),r=a[0],l=a[1],s=(0,i.useState)(!1),o=(0,f.Z)(s,2),d=o[0],h=o[1],p=(0,i.useState)([]),m=(0,f.Z)(p,2),g=m[0],y=m[1],b=(0,i.useState)({page:1,limit:20,userId:t}),C=(0,f.Z)(b,2),I=C[0],S=C[1],k=(0,i.useRef)(),w=(0,i.useRef)(),R=[{title:"#",width:40,render:function(e,t,n){return(0,u.jsx)("b",{children:n+1})}},{title:"name",dataIndex:"name"},{title:"Address",dataIndex:"address"},{title:"Landmark",dataIndex:"landMark"},{title:"City",dataIndex:"city"},{title:"Pin",dataIndex:"pin"},{title:"City",dataIndex:"city"},{title:"Type",dataIndex:"type"},{title:"Phone No.",dataIndex:"phone"},{title:"Optional-Phone No.",dataIndex:"optionalPhone"},{title:"Action",dataIndex:"_id",width:70,render:function(e,t){return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(Z.Z,{title:"Are you sure to delete this data?",onConfirm:function(){U(t._id)},okText:"Yes",cancelText:"No",children:[(0,u.jsx)(c.Z,{type:"primary",size:"small",danger:!0,icon:(0,u.jsx)(D.Z,{})}),"\xa0"]}),(0,u.jsx)(c.Z,{type:"primary",size:"small",icon:(0,u.jsx)(T.Z,{}),onClick:function(){k.current.openForm(t)}})]})}}].filter((function(e){return!e.hidden}));function P(){h(!0),Ie.listJob(I).then((function(e){var t;l(null===(t=e.data)||void 0===t?void 0:t.map((function(e){return(0,x.Z)((0,x.Z)({},e),{},{key:e._id})}))),S((0,x.Z)((0,x.Z)({},I),{},{limit:e.extra.limit,page:e.extra.page,total:e.extra.total}))})).catch((function(e){})).finally((function(){h(!1)}))}var U=function(e){Ie.deleteJob(e).then((function(e){E(e.message),P(),y([])})).catch((function(e){E(e.message,"error")}))},N=R.map((function(e){return(0,x.Z)((0,x.Z)({},e),{},{ellipsis:!1})}));N[0].fixed=!0,N[N.length-1].fixed="right";var A={bordered:!0,loading:d,size:"small",title:function(){return(0,u.jsx)(ke,{addNewModalRef:k,selected:g,deleteData:U,qData:I,setQData:S,list:P})},showHeader:!0,footer:function(){return(0,u.jsx)(_,{qData:I,setQData:S})},rowSelection:{onChange:function(e){y(e)}},tableLayout:void 0};return(0,i.useEffect)((function(){P()}),[I.page,I.limit]),(0,u.jsxs)(u.Fragment,{children:[t?null:(0,u.jsx)(v.Z.Title,{level:5,style:{marginTop:0},children:"List of Users"}),(0,u.jsx)(j.Z,(0,x.Z)((0,x.Z)({},A),{},{pagination:{position:["none"],pageSize:I.limit},columns:N,dataSource:r.length?r:[],scroll:{y:"calc(100vh - 340px)",x:"calc(100vw - 387px)"}})),(0,u.jsx)(we,{ref:k,list:P,userId:t}),(0,u.jsx)(De,{ref:w,list:P})]})}function ke(e){var t=e.addNewModalRef,n=e.selected,i=e.deleteData,a=e.qData,r=e.setQData,l=e.list;return(0,u.jsx)(g.Z,{onSubmitCapture:l,className:"search-form",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{span:4,children:(0,u.jsx)(g.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(k.Z,{placeholder:"Search by name or code",value:a.key,onChange:function(e){return r((0,x.Z)((0,x.Z)({},a),{},{key:e.target.value}))},allowClear:!0})})}),(0,u.jsx)(b.Z,{span:3,children:(0,u.jsx)(g.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(c.Z,{type:"primary",htmlType:"submit",children:"Search"})})}),(0,u.jsxs)(b.Z,{span:5,children:[(0,u.jsx)(g.Z.Item,{style:{marginBottom:0,float:"right"},children:(0,u.jsx)(c.Z,{type:"primary",icon:(0,u.jsx)(R.Z,{}),onClick:function(){t.current.openForm()},children:"Add New"})}),n.length?(0,u.jsx)(Z.Z,{title:"Are you sure to delete these selected datas?",onConfirm:function(){i(n)},okText:"Yes",cancelText:"No",children:(0,u.jsx)(c.Z,{type:"primary",danger:!0,style:{float:"right"},icon:(0,u.jsx)(D.Z,{}),children:"Delete Selected"})}):null]})]})})}Ie.baseURL="user";var we=(0,i.forwardRef)((function(e,t){var n=e.list,a=e.userId,r=(0,i.useState)(!1),l=(0,f.Z)(r,2),s=l[0],o=l[1],d=(0,i.useState)({}),h=(0,f.Z)(d,2),p=h[0],m=h[1],Z=(0,i.useState)(!1),v=(0,f.Z)(Z,2),j=v[0],C=v[1],w=function(e){m((0,x.Z)((0,x.Z)({},p),e))};(0,i.useImperativeHandle)(t,(function(){return{openForm:function(e){o(!0),m(e?(0,x.Z)({},e):{userId:a})}}})),(0,i.useEffect)((function(){console.log("oooo",p)}),[p]);var D=function(){C(!0),Ie.saveJob(p).then((function(e){E(e.message),w((0,x.Z)({},e.data)),n(),o(!1)})).catch((function(e){"object"===typeof e.message?E(e.message[Object.keys(e.message)[0]],"error"):E(e.message,"error")})).finally((function(){C(!1)}))};return(0,i.useEffect)((function(){s||m({_id:null})}),[s]),(0,i.useEffect)((function(){p._id||w({slug:Q.Z.removeSpecialChars(p.name||"")})}),[p.name]),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(I.Z,{title:(p._id?"Edit":"Add")+" Address",style:{top:20},open:s,okText:"Save",onOk:D,okButtonProps:{disabled:j},onCancel:function(){o(!1)},destroyOnClose:!0,maskClosable:!1,width:500,className:"app-modal-body",footer:[(0,u.jsx)(c.Z,{onClick:function(){o(!1)},children:"Cancel"},"cancel"),(0,u.jsx)(c.Z,{type:"primary",onClick:D,children:"save"},"save")],children:(0,u.jsx)(S.Z,{spinning:j,indicator:(0,u.jsx)(P.Z,{style:{fontSize:24},spin:!0}),children:(0,u.jsx)(g.Z,{layout:"vertical",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(g.Z.Item,{label:"Name",required:!0,children:(0,u.jsx)(k.Z,{placeholder:"Name",value:p.name,onChange:function(e){w({name:e.target.value})}})})}),(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(g.Z.Item,{label:"Address",required:!0,children:(0,u.jsx)(k.Z,{placeholder:"Address",value:p.address,onChange:function(e){w({address:e.target.value})}})})}),(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(g.Z.Item,{label:"Landmark",required:!0,children:(0,u.jsx)(k.Z,{placeholder:"Landmark",value:p.landMark,onChange:function(e){w({landMark:e.target.value})}})})}),(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(g.Z.Item,{label:"City",required:!0,children:(0,u.jsx)(k.Z,{placeholder:"City",value:p.city,onChange:function(e){w({city:e.target.value})}})})}),(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(g.Z.Item,{label:"Pin",required:!0,children:(0,u.jsx)(k.Z,{placeholder:"Pin",value:p.pin,onChange:function(e){w({pin:e.target.value})}})})}),(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(g.Z.Item,{label:"Phone",required:!0,children:(0,u.jsx)(k.Z,{placeholder:"Phone",value:p.phone,onChange:function(e){w({phone:e.target.value})}})})}),(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(g.Z.Item,{label:"Optional-Phone Number",required:!0,children:(0,u.jsx)(k.Z,{placeholder:"Optional-Phone Number",value:p.optionalPhone,onChange:function(e){w({optionalPhone:e.target.value})}})})}),(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(g.Z.Item,{label:"Type",required:!0,children:(0,u.jsx)(k.Z,{placeholder:"Home/Office/Other",value:p.type,onChange:function(e){w({type:e.target.value})}})})})]})})})})})})),De=(0,i.forwardRef)((function(e,t){var n=(0,i.useState)(!1),a=(0,f.Z)(n,2),r=a[0],l=a[1],s=(0,i.useState)({aspect:1}),o=(0,f.Z)(s,2),d=o[0],c=o[1];return(0,i.useImperativeHandle)(t,(function(){return{openForm:function(e){l(!0),c((0,x.Z)({},e))}}})),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(I.Z,{title:d._id?"List of Varient":"Add User",style:{top:20},open:r,okText:"Save",onCancel:function(){l(!1)},destroyOnClose:!0,maskClosable:!1,width:1200,className:"app-modal-body",children:(0,u.jsx)(Se,{productId:d._id})})})})),Te=n(6384),Re=function(){function e(){(0,U.Z)(this,e)}return(0,N.Z)(e,null,[{key:"list",value:function(e){return A.Z.get(this.baseURL+"list",{params:e})}},{key:"delete",value:function(e){return A.Z.post(this.baseURL+"delete",{ids:e})}},{key:"save",value:function(e,t){return A.Z.post(this.baseURL+"save",e,{params:t})}}]),e}();function Pe(e){var t=e.userId,n=(0,i.useState)([]),a=(0,f.Z)(n,2),r=a[0],l=a[1],s=(0,i.useState)(!1),o=(0,f.Z)(s,2),d=o[0],h=o[1],p=(0,i.useState)([]),m=(0,f.Z)(p,2),g=m[0],y=m[1],b=(0,i.useState)([]),C=(0,f.Z)(b,2),I=C[0],S=C[1],k=(0,i.useState)({page:1,limit:20,userId:t}),w=(0,f.Z)(k,2),R=w[0],P=w[1],U=(0,i.useState)(),N=(0,f.Z)(U,2),A=N[0],O=N[1],L=(0,i.useRef)(),F=(0,i.useRef)(),q=[{title:"#",width:40,render:function(e,t,n){return(0,u.jsx)("b",{children:n+1})}},{title:"Product Name",dataIndex:"productName"},{title:"Quantity",dataIndex:"quantity"},{title:"Weight",dataIndex:"weight"},{title:"Price",dataIndex:"price"},{title:"Image",dataIndex:"photoURL",width:300,render:function(e){return console.log(e),null!==e&&void 0!==e&&e.url?(0,u.jsx)(ae.Z,{src:null===e||void 0===e?void 0:e.url,height:80}):(0,u.jsx)("span",{children:"No Image"})}},{title:"Action",dataIndex:"_id",width:70,render:function(e,t){return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(Z.Z,{title:"Are you sure to delete this data?",onConfirm:function(){M(t._id)},okText:"Yes",cancelText:"No",children:[(0,u.jsx)(c.Z,{type:"primary",size:"small",danger:!0,icon:(0,u.jsx)(D.Z,{})}),"\xa0"]}),(0,u.jsx)(c.Z,{type:"primary",size:"small",icon:(0,u.jsx)(T.Z,{}),onClick:function(){L.current.openForm(t)}})]})}}].filter((function(e){return!e.hidden}));function z(){h(!0),Re.list(R).then((function(e){var t,n;console.log(R,"QQQQQQQQQdataaaaa"),console.log(e,"dataaaaa"),O(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.productVariantId),console.log(A,"varient"),l(null===(n=e.data)||void 0===n?void 0:n.map((function(e){return(0,x.Z)((0,x.Z)({},e),{},{key:e._id})}))),P((0,x.Z)((0,x.Z)({},R),{},{limit:e.extra.limit,page:e.extra.page,total:e.extra.total}))})).catch((function(e){})).finally((function(){h(!1)}))}(0,i.useEffect)((function(){je.listProduct({isAll:1}).then((function(e){y(e.data||[])})).catch((function(e){B.ZP.error("Category data not loaded")}))}),[]);var M=function(e){Re.delete(e).then((function(e){E(e.message),z(),S([])})).catch((function(e){E(e.message,"error")}))},Y=q.map((function(e){return(0,x.Z)((0,x.Z)({},e),{},{ellipsis:!1})}));Y[0].fixed=!0,Y[Y.length-1].fixed="right";var Q={bordered:!0,loading:d,size:"small",title:function(){return(0,u.jsx)(Ue,{addNewModalRef:L,selected:I,deleteData:M,qData:R,setQData:P,list:z})},showHeader:!0,footer:function(){return(0,u.jsx)(_,{qData:R,setQData:P})},rowSelection:{onChange:function(e){S(e)}},tableLayout:void 0};return(0,i.useEffect)((function(){z()}),[R.page,R.limit]),(0,u.jsxs)(u.Fragment,{children:[t?null:(0,u.jsx)(v.Z.Title,{level:5,style:{marginTop:0},children:"List of Users"}),(0,u.jsx)(j.Z,(0,x.Z)((0,x.Z)({},Q),{},{pagination:{position:["none"],pageSize:R.limit},columns:Y,dataSource:r.length?r:[],scroll:{y:"calc(100vh - 340px)",x:"calc(100vw - 387px)"}})),(0,u.jsx)(Ne,{ref:L,list:z,userId:t,varient:A,product:g}),(0,u.jsx)(Ae,{ref:F,list:z})]})}function Ue(e){var t=e.addNewModalRef,n=e.selected,i=e.deleteData,a=e.qData,r=(e.setQData,e.list),l=function(e,t){a[t]=e,void 0!==e&&""!==e||(delete a[t],r())};return(0,u.jsx)(g.Z,{onSubmitCapture:r,className:"search-form",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{span:4,children:(0,u.jsx)(g.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(k.Z,{placeholder:"Search by name or code",value:a.key,onChange:function(e){return l(e.target.value,"key")},allowClear:!0})})}),(0,u.jsx)(b.Z,{xs:24,xl:4,children:(0,u.jsx)(g.Z.Item,{children:(0,u.jsxs)(C.Z,{value:a.type,allowClear:!0,placeholder:"Search By Type",onChange:function(e){return l(e,"type")},children:[(0,u.jsx)(C.Z.Option,{value:"true",children:"AddOn"}),(0,u.jsx)(C.Z.Option,{value:"false",children:"Normal"})]})})}),(0,u.jsx)(b.Z,{span:3,children:(0,u.jsx)(g.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(c.Z,{type:"primary",htmlType:"submit",children:"Search"})})}),(0,u.jsxs)(b.Z,{span:5,children:[(0,u.jsx)(g.Z.Item,{style:{marginBottom:0,float:"right"},children:(0,u.jsx)(c.Z,{type:"primary",icon:(0,u.jsx)(R.Z,{}),onClick:function(){t.current.openForm()},children:"Add New"})}),n.length?(0,u.jsx)(Z.Z,{title:"Are you sure to delete these selected datas?",onConfirm:function(){i(n)},okText:"Yes",cancelText:"No",children:(0,u.jsx)(c.Z,{type:"primary",danger:!0,style:{float:"right"},icon:(0,u.jsx)(D.Z,{}),children:"Delete Selected"})}):null]})]})})}Re.baseURL="/cart/";var Ne=(0,i.forwardRef)((function(e,t){var n=e.list,a=e.userId,r=e.varient,l=e.product,s=(0,i.useState)(!1),o=(0,f.Z)(s,2),d=o[0],h=o[1],p=(0,i.useState)({}),m=(0,f.Z)(p,2),Z=m[0],v=m[1],j=(0,i.useState)(!1),C=(0,f.Z)(j,2),w=C[0],D=C[1],T=function(e){v((0,x.Z)((0,x.Z)({},Z),e))};(0,i.useImperativeHandle)(t,(function(){return{openForm:function(e){h(!0),v(e?(0,x.Z)({},e):{userId:a,varient:r})}}}));var R=function(){D(!0),Re.save(Z).then((function(e){E(e.message),T((0,x.Z)({},e.data)),n(),h(!1)})).catch((function(e){"object"===typeof e.message?E(e.message[Object.keys(e.message)[0]],"error"):E(e.message,"error")})).finally((function(){D(!1)}))};return(0,i.useEffect)((function(){d||v({_id:null})}),[d]),(0,i.useEffect)((function(){Z._id||T({slug:Q.Z.removeSpecialChars(Z.name||"")})}),[Z.name]),(0,i.useEffect)((function(){console.log(Z,"----first")}),[Z]),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(I.Z,{title:(Z._id?"Edit":"Add")+" Cart",style:{top:20},open:d,okText:"Save",onOk:R,okButtonProps:{disabled:w},onCancel:function(){h(!1)},destroyOnClose:!0,maskClosable:!1,width:500,className:"app-modal-body",footer:[(0,u.jsx)(c.Z,{onClick:function(){h(!1)},children:"Cancel"},"cancel"),(0,u.jsx)(c.Z,{type:"primary",onClick:R,children:"save"},"save")],children:(0,u.jsx)(S.Z,{spinning:w,indicator:(0,u.jsx)(P.Z,{style:{fontSize:24},spin:!0}),children:(0,u.jsx)(g.Z,{layout:"vertical",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[Z._id?(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(g.Z.Item,{label:"Product Name",required:!0,children:(0,u.jsx)(k.Z,{placeholder:"Product Name",value:Z.productName,onChange:function(e){T({productName:e.target.value})},disabled:!0})})}):(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(g.Z.Item,{label:"Product Name",required:!0,children:(0,u.jsx)(Te.Z,{mode:"multiple",value:Z.productVariantId,onChange:function(e){T(e)},treeData:l.map((function(e){return{value:e._id,label:e.name,children:e.variants.map((function(e){return{value:e._id,label:e.weight+" @\u20b9"+e.price}}))}}))})})}),(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(g.Z.Item,{label:"Quantity",required:!0,children:(0,u.jsx)(k.Z,{placeholder:"Quantity",value:Z.quantity,onChange:function(e){T({quantity:e.target.value})}})})})]})})})})})})),Ae=(0,i.forwardRef)((function(e,t){var n=(0,i.useState)(!1),a=(0,f.Z)(n,2),r=a[0],l=a[1],s=(0,i.useState)({aspect:1}),o=(0,f.Z)(s,2),d=o[0],c=o[1];return(0,i.useImperativeHandle)(t,(function(){return{openForm:function(e){l(!0),c((0,x.Z)({},e))}}})),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(I.Z,{title:d._id?"List of Varient":"Add User",style:{top:20},open:r,okText:"Save",onCancel:function(){l(!1)},destroyOnClose:!0,maskClosable:!1,width:1200,className:"app-modal-body",children:(0,u.jsx)(Pe,{productId:d._id})})})})),Oe=function(){function e(){(0,U.Z)(this,e)}return(0,N.Z)(e,null,[{key:"walletdetail",value:function(e,t){return A.Z.get(this.baseURL+"/details"+e,{params:t})}},{key:"walletlist",value:function(e){return A.Z.get(this.baseURL+"/list",{params:e})}},{key:"walletsave",value:function(e,t){return A.Z.post(this.baseURL+"/save",e,{params:t})}}]),e}();function Le(e){var t=e.userId,n=(0,i.useState)([]),a=(0,f.Z)(n,2),r=a[0],l=a[1],s=(0,i.useState)(!1),o=(0,f.Z)(s,2),d=o[0],c=o[1],h=(0,i.useState)([]),p=(0,f.Z)(h,2),m=p[0],Z=p[1],g=(0,i.useState)({page:1,limit:20,userId:t}),y=(0,f.Z)(g,2),b=y[0],C=y[1],I=(0,i.useRef)(),S=(0,i.useRef)(),k=[{title:"#",width:40,render:function(e,t,n){return(0,u.jsx)("b",{children:n+1})}},{title:"Amount",dataIndex:"amount"}].filter((function(e){return!e.hidden}));function w(){c(!0),Oe.walletlist(b).then((function(e){var t;l(null===(t=e.data)||void 0===t?void 0:t.map((function(e){return(0,x.Z)((0,x.Z)({},e),{},{key:e._id})}))),C((0,x.Z)((0,x.Z)({},b),{},{limit:e.extra.limit,page:e.extra.page,total:e.extra.total}))})).catch((function(e){})).finally((function(){c(!1)}))}var D=function(e){Oe.deleteJob(e).then((function(e){E(e.message),w(),Z([])})).catch((function(e){E(e.message,"error")}))},T=k.map((function(e){return(0,x.Z)((0,x.Z)({},e),{},{ellipsis:!1})}));T[0].fixed=!0,T[T.length-1].fixed="right";var R={bordered:!0,loading:d,size:"small",title:function(){return(0,u.jsx)(Fe,{addNewModalRef:I,selected:m,deleteData:D,qData:b,setQData:C,list:w})},showHeader:!0,footer:function(){return(0,u.jsx)(_,{qData:b,setQData:C})},rowSelection:{onChange:function(e){Z(e)}},tableLayout:void 0};return(0,i.useEffect)((function(){w()}),[b.page,b.limit]),(0,u.jsxs)(u.Fragment,{children:[t?null:(0,u.jsx)(v.Z.Title,{level:5,style:{marginTop:0},children:"List of Users"}),(0,u.jsx)(j.Z,(0,x.Z)((0,x.Z)({},R),{},{pagination:{position:["none"],pageSize:b.limit},columns:T,dataSource:r.length?r:[],scroll:{y:"calc(100vh - 340px)",x:"calc(100vw - 387px)"}})),(0,u.jsx)(_e,{ref:I,list:w,userId:t}),(0,u.jsx)(qe,{ref:S,list:w})]})}function Fe(e){var t=e.addNewModalRef,n=e.selected,i=e.deleteData,a=e.qData,r=e.setQData,l=e.list;return(0,u.jsx)(g.Z,{onSubmitCapture:l,className:"search-form",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{span:4,children:(0,u.jsx)(g.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(k.Z,{placeholder:"Search by name or code",value:a.key,onChange:function(e){return r((0,x.Z)((0,x.Z)({},a),{},{key:e.target.value}))},allowClear:!0})})}),(0,u.jsx)(b.Z,{span:3,children:(0,u.jsx)(g.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(c.Z,{type:"primary",htmlType:"submit",children:"Search"})})}),(0,u.jsxs)(b.Z,{span:5,children:[(0,u.jsx)(g.Z.Item,{style:{marginBottom:0,float:"right"},children:(0,u.jsx)(c.Z,{type:"primary",icon:(0,u.jsx)(R.Z,{}),onClick:function(){t.current.openForm()},children:"Add New"})}),n.length?(0,u.jsx)(Z.Z,{title:"Are you sure to delete these selected datas?",onConfirm:function(){i(n)},okText:"Yes",cancelText:"No",children:(0,u.jsx)(c.Z,{type:"primary",danger:!0,style:{float:"right"},icon:(0,u.jsx)(D.Z,{}),children:"Delete Selected"})}):null]})]})})}Oe.baseURL="wallet";var _e=(0,i.forwardRef)((function(e,t){var n=e.list,a=e.userId,r=(0,i.useState)(!1),l=(0,f.Z)(r,2),s=l[0],o=l[1],d=(0,i.useState)({}),h=(0,f.Z)(d,2),p=h[0],m=h[1],Z=(0,i.useState)(!1),v=(0,f.Z)(Z,2),j=v[0],C=v[1],w=function(e){m((0,x.Z)((0,x.Z)({},p),e))};(0,i.useImperativeHandle)(t,(function(){return{openForm:function(e){o(!0),m(e?(0,x.Z)({},e):{userId:a,type:"admin"})}}}));var D=function(){C(!0),Oe.walletsave(p).then((function(e){E(e.message),w((0,x.Z)({},e.data)),n(),o(!1)})).catch((function(e){"object"===typeof e.message?E(e.message[Object.keys(e.message)[0]],"error"):E(e.message,"error")})).finally((function(){C(!1)}))};return(0,i.useEffect)((function(){s||m({_id:null})}),[s]),(0,i.useEffect)((function(){p._id||w({slug:Q.Z.removeSpecialChars(p.name||"")})}),[p.name]),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(I.Z,{title:(p._id?"Edit":"Add")+" Amount",style:{top:20},open:s,okText:"Save",onOk:D,okButtonProps:{disabled:j},onCancel:function(){o(!1)},destroyOnClose:!0,maskClosable:!1,width:500,className:"app-modal-body",footer:[(0,u.jsx)(c.Z,{onClick:function(){o(!1)},children:"Cancel"},"cancel"),(0,u.jsx)(c.Z,{type:"primary",onClick:D,children:"save"},"save")],children:(0,u.jsx)(S.Z,{spinning:j,indicator:(0,u.jsx)(P.Z,{style:{fontSize:24},spin:!0}),children:(0,u.jsx)(g.Z,{layout:"vertical",children:(0,u.jsx)(y.Z,{gutter:[12,2],children:(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(g.Z.Item,{label:"Amount",required:!0,children:(0,u.jsx)(k.Z,{placeholder:"Amount",value:p.amount,onChange:function(e){w({amount:e.target.value})}})})})})})})})})})),qe=(0,i.forwardRef)((function(e,t){var n=(0,i.useState)(!1),a=(0,f.Z)(n,2),r=a[0],l=a[1],s=(0,i.useState)({aspect:1}),o=(0,f.Z)(s,2),d=o[0],c=o[1];return(0,i.useImperativeHandle)(t,(function(){return{openForm:function(e){l(!0),c((0,x.Z)({},e))}}})),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(I.Z,{title:d._id?"List of Varient":"Add User",style:{top:20},open:r,okText:"Save",onCancel:function(){l(!1)},destroyOnClose:!0,maskClosable:!1,width:1200,className:"app-modal-body",children:(0,u.jsx)(Le,{productId:d._id})})})}));function ze(e){var t=e.userId,n=(0,i.useState)([]),a=(0,f.Z)(n,2),r=a[0],l=a[1],s=(0,i.useState)(!1),o=(0,f.Z)(s,2),d=o[0],h=o[1],p=(0,i.useState)([]),g=(0,f.Z)(p,2),y=g[0],b=g[1],C=(0,i.useState)({page:1,limit:20,userId:t}),I=(0,f.Z)(C,2),S=I[0],k=I[1],w=(0,i.useRef)(),R=(0,i.useRef)(),P=(0,i.useRef)(),U=(0,i.useRef)(),N=[{title:"#",width:40,render:function(e,t,n){return(0,u.jsx)("b",{children:n+1})}},{title:"Username",dataIndex:"name",width:150},{title:"Phone",dataIndex:"phone",width:100},{title:"Email",dataIndex:"email",width:200},{title:"Job",dataIndex:"_id",width:80,render:function(e,t){return(0,u.jsx)(c.Z,{type:"primary",size:"small",onClick:function(){R.current.openForm({_id:t._id,name:t.name})},children:"Address"})}},{title:"Cart",dataIndex:"_id",width:80,render:function(e,t){return(0,u.jsx)(c.Z,{type:"primary",size:"small",onClick:function(){P.current.openForm({_id:t._id,name:t.name})},children:"Cart"})}},{title:"Wallet History",dataIndex:"_id",width:80,render:function(e,t){return(0,u.jsx)(c.Z,{type:"primary",size:"small",onClick:function(){U.current.openForm({_id:t._id,name:t.name})},children:"Wallet"})}},{title:"Status",dataIndex:"status",width:80,render:function(e){return"blocked"===e?(0,u.jsx)(m.Z,{color:"red",children:"Blocked"}):"active"===e?(0,u.jsx)(m.Z,{color:"green",children:"Active"}):(0,u.jsx)(m.Z,{color:"yellow",children:"Inactive"})}},{title:"Action",dataIndex:"_id",width:70,render:function(e,t){return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(Z.Z,{title:"Are you sure to delete this User?",onConfirm:function(){O(t._id)},okText:"Yes",cancelText:"No",children:[(0,u.jsx)(c.Z,{type:"primary",size:"small",danger:!0,icon:(0,u.jsx)(D.Z,{})}),"\xa0"]}),(0,u.jsx)(c.Z,{type:"primary",size:"small",icon:(0,u.jsx)(T.Z,{}),onClick:function(){w.current.openForm(t._id)}})]})}}].filter((function(e){return!e.hidden}));function A(){h(!0),Ce.listUser(S).then((function(e){var t;l(null===(t=e.data)||void 0===t?void 0:t.map((function(e){return(0,x.Z)((0,x.Z)({},e),{},{key:e._id})}))),k((0,x.Z)((0,x.Z)({},S),{},{limit:e.extra.limit,page:e.extra.page,total:e.extra.total}))})).catch((function(e){})).finally((function(){h(!1)}))}var O=function(e){Ce.deleteUser(e).then((function(e){E(e.message),A(),b([])})).catch((function(e){E(e.message,"error")}))},L=N.map((function(e){return(0,x.Z)((0,x.Z)({},e),{},{ellipsis:!1})}));L[0].fixed=!0,L[L.length-1].fixed="right";var F={bordered:!0,loading:d,size:"small",title:function(){return(0,u.jsx)(Be,{addNewModalRef:w,selected:y,deleteData:O,qData:S,setQData:k,list:A})},showHeader:!0,footer:function(){return(0,u.jsx)(_,{qData:S,setQData:k})},rowSelection:{onChange:function(e){b(e)}},tableLayout:void 0};return(0,i.useEffect)((function(){A()}),[S.page,S.limit]),(0,u.jsxs)(u.Fragment,{children:[t?null:(0,u.jsx)(v.Z.Title,{level:5,style:{marginTop:0},children:"List of Users"}),(0,u.jsx)(j.Z,(0,x.Z)((0,x.Z)({},F),{},{pagination:{position:["none"],pageSize:S.limit},columns:L,dataSource:r.length?r:[],scroll:{y:"calc(100vh - 340px)",x:"calc(100vw - 387px)"}})),(0,u.jsx)(Ee,{ref:w,list:A,userId:t}),(0,u.jsx)(Me,{ref:R}),(0,u.jsx)(Ye,{ref:P}),(0,u.jsx)(Qe,{ref:U})]})}function Be(e){var t=e.addNewModalRef,n=e.selected,i=e.deleteData,a=e.qData,r=(e.setQData,e.list),l=function(e,t){a[t]=e,void 0!==e&&""!==e||(delete a[t],r())};return(0,u.jsx)(g.Z,{onSubmitCapture:r,className:"search-form",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{xs:24,xl:4,children:(0,u.jsx)(g.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(k.Z,{placeholder:"Search by name or Number or Email",value:a.key,onChange:function(e){return l(e.target.value,"key")},allowClear:!0})})}),(0,u.jsx)(b.Z,{xs:24,xl:4,children:(0,u.jsx)(g.Z.Item,{children:(0,u.jsxs)(C.Z,{value:a.status,allowClear:!0,placeholder:"Search By Status",onChange:function(e){return l(e,"status")},children:[(0,u.jsx)(C.Z.Option,{value:"active",children:"Active"}),(0,u.jsx)(C.Z.Option,{value:"inactive",children:"Inactive"}),(0,u.jsx)(C.Z.Option,{value:"blocked",children:"Blocked"})]})})}),(0,u.jsx)(b.Z,{span:3,children:(0,u.jsx)(g.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(c.Z,{type:"primary",htmlType:"submit",children:"Search"})})}),(0,u.jsxs)(b.Z,{span:5,children:[(0,u.jsx)(g.Z.Item,{style:{marginBottom:0,float:"right"},children:(0,u.jsx)(c.Z,{type:"primary",icon:(0,u.jsx)(R.Z,{}),onClick:function(){t.current.openForm()},children:"Add New"})}),n.length?(0,u.jsx)(Z.Z,{title:"Are you sure to delete these selected images?. Be sure to delete the image from server.",onConfirm:function(){i(n)},okText:"Yes",cancelText:"No",children:(0,u.jsx)(c.Z,{type:"primary",danger:!0,style:{float:"right"},icon:(0,u.jsx)(D.Z,{}),children:"Delete Selected"})}):null]})]})})}var Ee=(0,i.forwardRef)((function(e,t){var n=e.list,a=e.userId,r=(0,i.useState)(!1),l=(0,f.Z)(r,2),s=l[0],o=l[1],d=(0,i.useState)({aspect:1}),h=(0,f.Z)(d,2),p=h[0],m=h[1],Z=(0,i.useState)(!1),v=(0,f.Z)(Z,2),j=v[0],w=v[1],D=(0,i.useState)([]),T=(0,f.Z)(D,2),R=T[0],U=T[1],N=function(e){Object.entries(e).forEach((function(e){for(var t=p,n=e[0],i=e[1],a=n.split("."),r=0;r<a.length;r++)r+1===a.length?t[a[r]]=i:("undefined"===typeof t[a[r]]&&(1*parseInt(a[r+1])>=0?t[a[r]]=[]:t[a[r]]={}),t=t[a[r]])})),m((0,x.Z)({},p))};(0,i.useImperativeHandle)(t,(function(){return{openForm:function(e){o(!0),m(e?{_id:e}:{userId:a})}}}));var A=function(){w(!0),Ce.saveUser(p).then((function(e){E(e.message),N((0,x.Z)({},e.data)),n(),o(!1)})).catch((function(e){"object"===typeof e.message?E(e.message[Object.keys(e.message)[0]],"error"):E(e.message,"error")})).finally((function(){w(!1)}))};return(0,i.useEffect)((function(){p._id&&(w(!0),Ce.detailUser(p._id).then((function(e){var t,n;m(e.data||{}),U(null!==(t=e.data)&&void 0!==t&&t.avatar?[null===(n=e.data)||void 0===n?void 0:n.avatar]:[])})).catch((function(e){E(e.message,"error")})).finally((function(){w(!1)})))}),[p._id]),(0,i.useEffect)((function(){s?U([]):m({_id:null})}),[s]),(0,i.useEffect)((function(){N({avatar:null===R||void 0===R?void 0:R[0]})}),[R]),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(I.Z,{title:(p._id?"Edit":"Add")+" User",style:{top:20},open:s,okText:"Save",onOk:A,okButtonProps:{disabled:j},onCancel:function(){o(!1)},destroyOnClose:!0,maskClosable:!1,width:800,className:"app-modal-body",footer:[(0,u.jsx)(c.Z,{onClick:function(){o(!1)},children:"Cancel"},"cancel"),(0,u.jsx)(c.Z,{type:"primary",onClick:A,children:"Save"},"save")],children:(0,u.jsx)(S.Z,{spinning:j,indicator:(0,u.jsx)(P.Z,{style:{fontSize:24},spin:!0}),children:(0,u.jsx)(g.Z,{layout:"vertical",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{span:20,children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(g.Z.Item,{label:"Username",required:!0,children:(0,u.jsx)(k.Z,{placeholder:"John Doe",value:p.name,onChange:function(e){N({name:e.target.value})}})})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(g.Z.Item,{label:"Email",required:!0,children:(0,u.jsx)(k.Z,{placeholder:"Email",value:p.email,onChange:function(e){N({email:e.target.value})}})})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(g.Z.Item,{label:"Phone",required:!0,children:(0,u.jsx)(k.Z,{placeholder:"Phone",value:p.phone,onChange:function(e){N({phone:e.target.value})}})})})]})}),(0,u.jsx)(b.Z,{span:4,children:(0,u.jsx)(g.Z.Item,{label:"Avatar",children:(0,u.jsx)(pe,{fileList:R,setFileList:U,count:1})})}),(0,u.jsx)(b.Z,{span:10,children:(0,u.jsx)(g.Z.Item,{label:"Status",required:!0,children:(0,u.jsxs)(C.Z,{value:p.status,onChange:function(e){N({status:e})},children:[(0,u.jsx)(C.Z.Option,{value:"active",children:"Active"}),(0,u.jsx)(C.Z.Option,{value:"inactive",children:"Inactive"}),(0,u.jsx)(C.Z.Option,{value:"blocked",children:"Blocked"})]})})})]})})})})})})),Me=(0,i.forwardRef)((function(e,t){var n=(0,i.useState)(!1),a=(0,f.Z)(n,2),r=a[0],l=a[1],s=(0,i.useState)({}),o=(0,f.Z)(s,2),d=o[0],h=o[1];return(0,i.useImperativeHandle)(t,(function(){return{openForm:function(e){l(!0),h(e?(0,x.Z)({},e):{status:!0})}}})),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(I.Z,{title:(0,u.jsxs)(u.Fragment,{children:["Address of ",(0,u.jsx)(v.Z.Text,{type:"danger",children:null===d||void 0===d?void 0:d.name})]}),style:{top:20},open:r,onCancel:function(){l(!1)},destroyOnClose:!0,maskClosable:!1,width:1600,className:"app-modal-body-overflow",footer:[(0,u.jsx)(c.Z,{onClick:function(){l(!1)},children:"Cancel"},"cancel")],children:(0,u.jsx)(Se,{userId:d._id})})})})),Ye=(0,i.forwardRef)((function(e,t){var n=(0,i.useState)(!1),a=(0,f.Z)(n,2),r=a[0],l=a[1],s=(0,i.useState)({}),o=(0,f.Z)(s,2),d=o[0],h=o[1];return(0,i.useImperativeHandle)(t,(function(){return{openForm:function(e){l(!0),h(e?(0,x.Z)({},e):{status:!0})}}})),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(I.Z,{title:(0,u.jsxs)(u.Fragment,{children:["Cart of ",(0,u.jsx)(v.Z.Text,{type:"danger",children:null===d||void 0===d?void 0:d.name})]}),style:{top:20},open:r,onCancel:function(){l(!1)},destroyOnClose:!0,maskClosable:!1,width:1600,className:"app-modal-body-overflow",footer:[(0,u.jsx)(c.Z,{onClick:function(){l(!1)},children:"Cancel"},"cancel")],children:(0,u.jsx)(Pe,{userId:d._id})})})})),Qe=(0,i.forwardRef)((function(e,t){var n=(0,i.useState)(!1),a=(0,f.Z)(n,2),r=a[0],l=a[1],s=(0,i.useState)({}),o=(0,f.Z)(s,2),d=o[0],h=o[1];return(0,i.useImperativeHandle)(t,(function(){return{openForm:function(e){l(!0),h(e?(0,x.Z)({},e):{status:!0})}}})),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(I.Z,{title:(0,u.jsxs)(u.Fragment,{children:["Amount of ",(0,u.jsx)(v.Z.Text,{type:"danger",children:null===d||void 0===d?void 0:d.name})]}),style:{top:20},open:r,onCancel:function(){l(!1)},destroyOnClose:!0,maskClosable:!1,width:1600,className:"app-modal-body-overflow",footer:[(0,u.jsx)(c.Z,{onClick:function(){l(!1)},children:"Cancel"},"cancel")],children:(0,u.jsx)(Le,{userId:d._id})})})})),He=n(2014),Ve=n(7128),We=n(732);(function(){function e(){(0,U.Z)(this,e)}return(0,N.Z)(e,null,[{key:"detailUser",value:function(e,t){return A.Z.get(this.baseURL+"details/"+e,{params:t})}},{key:"listUser",value:function(e){return A.Z.get(this.baseURL+"list",{params:e})}},{key:"saveUser",value:function(e,t){return A.Z.post(this.baseURL+"save",e,{params:t})}},{key:"deleteUser",value:function(e){return A.Z.post(this.baseURL+"delete",{ids:e})}}]),e}()).baseURL="ecommerce/variant/";var Je=function(){function e(){(0,U.Z)(this,e)}return(0,N.Z)(e,null,[{key:"typeDetails",value:function(e,t){return A.Z.get(this.baseURL+"/details/"+e,{params:t})}},{key:"typeList",value:function(e){return A.Z.get(this.baseURL+"/list",{params:e})}},{key:"typeSave",value:function(e,t){return A.Z.post(this.baseURL+"/create",e,{params:t})}},{key:"typeDelete",value:function(e){return A.Z.post(this.baseURL+"/delete",{ids:e})}}]),e}();function Ke(e){var t=e.productSpecialization,n=e.categoryId,a=(0,i.useState)([]),r=(0,f.Z)(a,2),l=r[0],s=r[1],o=(0,i.useState)(!1),d=(0,f.Z)(o,2),h=d[0],p=d[1],g=(0,i.useState)([]),y=(0,f.Z)(g,2),b=y[0],C=y[1],I=(0,i.useState)([]),S=(0,f.Z)(I,2),k=S[0],w=S[1],R=(0,i.useState)([]),P=(0,f.Z)(R,2),U=P[0],N=P[1],A=(0,i.useState)({page:1,limit:20,type:"product",categoryId:n}),O=(0,f.Z)(A,2),L=O[0],F=O[1];console.log("this is product",t);var q=(0,i.useRef)(),z=(0,i.useState)(!0),M=(0,f.Z)(z,2),Y=(M[0],M[1],[{title:"#",width:40,render:function(e,t,n){return(0,u.jsx)("b",{children:n+1})}},{title:"Name",dataIndex:"name",width:150},{title:"Slug",dataIndex:"slug",width:100},{title:"Image",dataIndex:"thumbImg",width:100,render:function(e){return(0,u.jsx)(ae.Z,{src:null===e||void 0===e?void 0:e.url,height:80})}},{title:"Categories",dataIndex:"categoryDetails",width:250,render:function(e){return e.map((function(e){return(0,u.jsx)(m.Z,{children:e.name||"UNKNOWN"},e._id)}))}},{title:"Status",dataIndex:"status",width:80,render:function(e){return e?(0,u.jsx)(m.Z,{color:"green",children:"Active"}):(0,u.jsx)(m.Z,{color:"red",children:"Inactive"})}},{title:"Action",dataIndex:"_id",width:70,render:function(e,t){return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(Z.Z,{title:"Are you sure to delete this data?",onConfirm:function(){H(t)},okText:"Yes",cancelText:"No",children:[(0,u.jsx)(c.Z,{type:"primary",size:"small",danger:!0,icon:(0,u.jsx)(D.Z,{})}),"\xa0"]}),(0,u.jsx)(c.Z,{type:"primary",size:"small",icon:(0,u.jsx)(T.Z,{}),onClick:function(){q.current.openForm(t)}})]})}}].filter((function(e){return!e.hidden})));function Q(){p(!0),""!==L.categoryId&&je.listUser(L).then((function(e){var t;s(null===(t=e.data)||void 0===t?void 0:t.map((function(e){return(0,x.Z)((0,x.Z)({},e),{},{key:e._id})}))),F((0,x.Z)((0,x.Z)({},L),{},{limit:e.extra.limit,page:e.extra.page,total:e.extra.total}))})).catch((function(e){})).finally((function(){p(!1)}))}var H=function(e){je.deleteUser(e).then((function(e){E(e.message),Q(),C([])})).catch((function(e){E(e.message,"error")}))},V=Y.map((function(e){return(0,x.Z)((0,x.Z)({},e),{},{ellipsis:!1})}));V[0].fixed=!0,V[V.length-1].fixed="right";var W={bordered:!0,loading:h,size:"small",title:function(){return(0,u.jsx)(Ge,{addNewModalRef:q,selected:b,deleteData:H,qData:L,setQData:F,list:Q})},showHeader:!0,footer:function(){return(0,u.jsx)(_,{qData:L,setQData:F})},rowSelection:{onChange:function(e){C(e)}},tableLayout:void 0};return(0,i.useEffect)((function(){Q()}),[L.page,L.limit,L.categoryId,n]),(0,i.useEffect)((function(){re.list({isAll:1}).then((function(e){w(e.data||[])})).catch((function(e){B.ZP.error("Category data not loaded")})),Je.typeList().then((function(e){N(e.data||[])})).catch((function(e){B.ZP.error("Specialization data not loaded")}))}),[]),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(v.Z.Title,{level:5,style:{marginTop:0},children:"Product List"}),(0,u.jsx)(j.Z,(0,x.Z)((0,x.Z)({},W),{},{pagination:{position:["none"],pageSize:L.limit},columns:V,dataSource:l.length?l:[],scroll:{y:"calc(100vh - 340px)",x:"calc(100vw - 387px)"},expandable:{rowExpandable:function(e){return!0},expandedRowRender:function(e){return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("div",{style:{display:"flex",flexDirection:"row-reverse"},children:(0,u.jsx)(j.Z,{bordered:!0,scroll:{y:"calc(100vh - 340px)",x:"calc(100vw - 387px)"},pagination:!1,dataSource:[e],columns:[{title:"Images",dataIndex:"imgs",width:300,render:function(e){return(0,u.jsx)(u.Fragment,{children:e.map((function(e){return(0,u.jsx)(ae.Z,{src:null===e||void 0===e?void 0:e.url,height:80})}))})}},{title:"All Variants",dataIndex:"variants",width:600,render:function(e){return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("span",{style:{margin:"0 10px"},children:"No."}),(0,u.jsx)("span",{style:{margin:"0 10px"},children:"Name."}),(0,u.jsx)("span",{style:{margin:"0 10px"},children:"Price(In \u20b9)"}),(0,u.jsx)("span",{style:{margin:"0 10px"},children:"actual Price (In \u20b9)"}),(0,u.jsx)("span",{style:{margin:"0 10px"},children:"Inventory"})]}),e.map((function(e,t){return(0,u.jsxs)("div",{children:[(0,u.jsxs)("div",{children:[(0,u.jsxs)("span",{style:{margin:"0 10px"},children:[t+1,"."]}),(0,u.jsx)("span",{style:{margin:"0 30px"},children:e.weight}),(0,u.jsx)("span",{style:{margin:"0 10px"},children:e.price}),(0,u.jsx)("span",{style:{margin:"0 70px"},children:e.heartShapeCost}),(0,u.jsx)("span",{style:{margin:"0 10px"},children:e.inventory})]}),(0,u.jsx)("hr",{})]})}))]})}}]})})})}}})),(0,u.jsx)(Xe,{ref:q,list:Q,category:k,qData:L,specializations:U,productSpecialization:t,categoryId:n})]})}function Ge(e){var t=e.addNewModalRef,n=e.selected,i=e.deleteData,a=e.qData,r=(e.setQData,e.list);return(0,u.jsx)(g.Z,{onSubmitCapture:r,className:"search-form",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{xs:24,xl:4,children:(0,u.jsx)(g.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(k.Z,{placeholder:"Search by name or code",value:a.key,onChange:function(e){return t=e.target.value,a[n="key"]=t,void(void 0!==t&&""!==t||(delete a[n],r()));var t,n},allowClear:!0})})}),(0,u.jsx)(b.Z,{span:3,children:(0,u.jsx)(g.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(c.Z,{type:"primary",htmlType:"submit",children:"Search"})})}),(0,u.jsxs)(b.Z,{span:5,children:[(0,u.jsx)(g.Z.Item,{style:{marginBottom:0,float:"right"},children:(0,u.jsx)(c.Z,{type:"primary",icon:(0,u.jsx)(R.Z,{}),onClick:function(){t.current.openForm()},children:"Add New"})}),n.length?(0,u.jsx)(Z.Z,{title:"Are you sure to delete these selected data ?",onConfirm:function(){i(n)},okText:"Yes",cancelText:"No",children:(0,u.jsx)(c.Z,{type:"primary",danger:!0,style:{float:"right"},icon:(0,u.jsx)(D.Z,{}),children:"Delete Selected"})}):null]})]})})}Je.baseURL="specialization";var Xe=(0,i.forwardRef)((function(e,t){var n=e.list,a=e.categoryId,r=e.category,s=e.specializations,o=e.productSpecialization,d=(0,i.useState)(!1),h=(0,f.Z)(d,2),p=h[0],m=h[1],Z=(0,i.useState)({aspect:1}),v=(0,f.Z)(Z,2),j=v[0],w=v[1],D=(0,i.useState)(!1),T=(0,f.Z)(D,2),R=T[0],U=T[1],N=(0,i.useState)([]),A=(0,f.Z)(N,2),O=A[0],L=A[1],F=(0,i.useState)([]),_=(0,f.Z)(F,2),q=_[0],z=_[1],M=function(e,t){for(var n=j,i=t.split("."),a=0;a<i.length;a++)a+1===i.length?n[i[a]]=e:("undefined"===typeof n[i[a]]&&(1*parseInt(i[a+1])>=0?n[i[a]]=[]:n[i[a]]={}),n=n[i[a]]);w((0,x.Z)((0,x.Z)({},j),e))};(0,i.useImperativeHandle)(t,(function(){return{openForm:function(e){m(!0),w(e?(0,x.Z)((0,x.Z)({},e),{},{ocassion:[],flavour:[],recipient:[],relation:[],specializationIds:[]}):{isPremium:!1,isBestSelling:!1,forBirthday:!1,forAnniversary:!1,isBestSellingCombos:!1,variants:[{}],ocassion:[],flavour:[],recipient:[],relation:[],specializationIds:[],categoryIds:[a]}),null!==e&&void 0!==e&&e.imgs?z(e.imgs.length?(0,se.Z)(null===e||void 0===e?void 0:e.imgs):[]):z([]),null!==e&&void 0!==e&&e.thumbImg?L([e.thumbImg]):L([])}}}));var Y=function(){U(!0),je.saveUser(j).then((function(e){B.ZP.success(e.message),n(),m(!1)})).catch((function(e){if("object"===typeof e.message){var t=e.message[Object.keys(e.message)[0]];B.ZP.error(t)}else E(e.message,"error")})).finally((function(){U(!1)}))};return(0,i.useEffect)((function(){j._id||M(Q.Z.removeSpecialChars((null===j||void 0===j?void 0:j.name)||""),"slug")}),[j.name]),(0,i.useEffect)((function(){w((0,x.Z)((0,x.Z)({},j),{},{thumbImg:O[0]}))}),[O]),(0,i.useEffect)((function(){w((0,x.Z)((0,x.Z)({},j),{},{imgs:q}))}),[q]),(0,i.useEffect)((function(){var e,t,n,i;((null===j||void 0===j||null===(e=j.ocassion)||void 0===e?void 0:e.length)>0||(null===j||void 0===j||null===(t=j.flavour)||void 0===t?void 0:t.length)>0||(null===j||void 0===j||null===(n=j.recipient)||void 0===n?void 0:n.length)>0||(null===j||void 0===j||null===(i=j.relation)||void 0===i?void 0:i.length)>0)&&M([].concat((0,se.Z)(null===j||void 0===j?void 0:j.ocassion),(0,se.Z)(null===j||void 0===j?void 0:j.flavour),(0,se.Z)(null===j||void 0===j?void 0:j.relation),(0,se.Z)(null===j||void 0===j?void 0:j.recipient)),"specializationIds")}),[j.ocassion,j.flavour,null===j||void 0===j?void 0:j.relation,null===j||void 0===j?void 0:j.recipient]),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(I.Z,{title:(j._id?"Edit":"Add New")+" Product",style:{top:20},open:p,okText:"Save",onOk:Y,okButtonProps:{disabled:R},onCancel:function(){m(!1)},destroyOnClose:!0,maskClosable:!1,width:1200,className:"app-modal-body",footer:[(0,u.jsx)(c.Z,{onClick:function(){m(!1)},children:"Cancel"},"cancel"),(0,u.jsx)(c.Z,{type:"primary",onClick:Y,children:"Save"},"save")],children:(0,u.jsx)(S.Z,{spinning:R,indicator:(0,u.jsx)(P.Z,{style:{fontSize:24},spin:!0}),children:(0,u.jsx)(g.Z,{layout:"vertical",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{span:8,children:(0,u.jsx)(g.Z.Item,{label:"Name",required:!0,children:(0,u.jsx)(k.Z,{placeholder:"Name",value:j.name,onChange:function(e){M(e.target.value,"name")}})})}),(0,u.jsx)(b.Z,{span:8,children:(0,u.jsx)(g.Z.Item,{label:"Slug",required:!0,children:(0,u.jsx)(k.Z,{placeholder:"Slug",value:j.slug,onChange:function(e){M(Q.Z.removeSpecialChars(e.target.value),"slug")}})})}),(0,u.jsx)(b.Z,{span:8,children:(0,u.jsx)(g.Z.Item,{label:"Category",required:!0,children:(0,u.jsx)(C.Z,{mode:"multiple",value:j.categoryIds,onChange:function(e){M(e,"categoryIds")},options:r.map((function(e){return{value:e._id,label:e.name}}))})})}),null===o||void 0===o?void 0:o.map((function(e,t){return(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(g.Z.Item,{label:"Specialization (".concat(null===e||void 0===e?void 0:e.toUpperCase(),")"),children:(0,u.jsx)(C.Z,{mode:"multiple",onChange:function(t){M(t,e)},options:s.filter((function(t){return t.type===e})).map((function(e,t){return{value:e._id,label:e.name}}))})})},t)})),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(g.Z.Item,{label:"GST %",required:!0,children:(0,u.jsx)(k.Z,{placeholder:"GST Percentage",value:j.gst,type:"Number",onChange:function(e){M(e.target.value,"gst")}})})}),(0,u.jsx)(b.Z,{span:24}),(0,u.jsx)(b.Z,{span:8,children:(0,u.jsx)(g.Z.Item,{children:(0,u.jsx)(l.Z,{bordered:!0,size:"small",children:(0,u.jsx)(He.Z,{checked:j.heartShapeAvailable,onChange:function(e){return M(e.target.checked,"heartShapeAvailable")},children:"Heart Shape Available?"})})})}),(0,u.jsx)(b.Z,{span:8,children:(0,u.jsx)(g.Z.Item,{children:(0,u.jsx)(l.Z,{bordered:!0,size:"small",children:(0,u.jsx)(He.Z,{checked:j.messageAvailable,onChange:function(e){return M(e.target.checked,"messageAvailable")},children:"With Message Available?"})})})}),(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)($e,{variantDetails:j.variants,parentKay:"variants",handleChange:M})}),(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(g.Z.Item,{label:"Description",required:!0,children:(0,u.jsx)(X,{initialValue:j.description,onChange:function(e){j.description=e}})})}),(0,u.jsx)(b.Z,{span:8,children:(0,u.jsx)(g.Z.Item,{label:"Meta Title",required:!0,children:(0,u.jsx)(k.Z,{placeholder:"Meta title",value:j.metaTitle,onChange:function(e){M(e.target.value,"metaTitle")}})})}),(0,u.jsx)(b.Z,{span:8,children:(0,u.jsx)(g.Z.Item,{label:"Meta Tag",required:!0,children:(0,u.jsx)(k.Z,{placeholder:"Meta tag",value:j.metaTag,onChange:function(e){M(e.target.value,"metaTag")}})})}),(0,u.jsx)(b.Z,{span:8,children:(0,u.jsx)(g.Z.Item,{label:"Meta Description",required:!0,children:(0,u.jsx)(k.Z.TextArea,{rows:1,placeholder:"Meta-Description",value:j.metaDescription,onChange:function(e){M(e.target.value,"metaDescription")}})})}),(0,u.jsx)(Ve.Z,{}),(0,u.jsx)(b.Z,{span:8,children:(0,u.jsx)(g.Z.Item,{children:(0,u.jsx)(l.Z,{bordered:!0,size:"small",children:(0,u.jsx)(He.Z,{checked:j.isPopular,onChange:function(e){return M(e.target.checked,"isPopular")},children:"Popular"})})})}),(0,u.jsx)(b.Z,{span:8,children:(0,u.jsx)(g.Z.Item,{children:(0,u.jsx)(l.Z,{bordered:!0,size:"small",children:(0,u.jsx)(He.Z,{checked:j.isPremium,onChange:function(e){return M(e.target.checked,"isPremium")},children:"Premium"})})})}),(0,u.jsx)(b.Z,{span:8,children:(0,u.jsx)(g.Z.Item,{children:(0,u.jsx)(l.Z,{bordered:!0,size:"small",children:(0,u.jsx)(He.Z,{checked:j.isBestSelling,onChange:function(e){return M(e.target.checked,"isBestSelling")},children:"Best Selling"})})})}),(0,u.jsx)(b.Z,{span:6,children:(0,u.jsx)(g.Z.Item,{label:"Status",required:!0,children:(0,u.jsxs)(C.Z,{value:j.status,onChange:function(e){M(e,"status")},children:[(0,u.jsx)(C.Z.Option,{value:!0,children:"Active"}),(0,u.jsx)(C.Z.Option,{value:!1,children:"Inactive"})]})})}),(0,u.jsx)(b.Z,{span:6,children:(0,u.jsx)(g.Z.Item,{label:"PhotoUpload Available",required:!0,children:(0,u.jsxs)(C.Z,{value:j.photouploadAvailable,onChange:function(e){M(e,"photouploadAvailable")},children:[(0,u.jsx)(C.Z.Option,{value:!0,children:"Yes"}),(0,u.jsx)(C.Z.Option,{value:!1,children:"No"})]})})}),(0,u.jsx)(Ve.Z,{}),(0,u.jsx)(b.Z,{span:4,children:(0,u.jsx)(g.Z.Item,{label:"Thumbnail Photo",children:(0,u.jsx)(pe,{fileList:O,setFileList:L})})}),(0,u.jsx)(b.Z,{span:20,children:(0,u.jsx)(g.Z.Item,{label:"Photo",children:(0,u.jsx)(pe,{fileList:q,setFileList:z,count:20})})})]})})})})})}));function $e(e){var t=e.variantDetails,n=e.parentKay,a=e.handleChange;return(0,u.jsxs)(i.Fragment,{children:[(0,u.jsx)(Ve.Z,{orientation:"left",children:"variants"===n?"Variants":"Variant"}),(0,u.jsx)(j.Z,{bordered:!0,size:"small",showHeader:!0,footer:null,tableLayout:void 0,pagination:{position:["none"]},columns:[{title:"Weight",dataIndex:"weight",render:function(e,t,i){return(0,u.jsx)(k.Z,{placeholder:"Weight",value:e,onChange:function(e){a(e.target.value,"".concat(n,".").concat(i,".weight"))}})}},{title:"Price",dataIndex:"price",width:300,render:function(e,t,i){return(0,u.jsx)(k.Z,{placeholder:"Price (In \u20b9)",value:e,onChange:function(e){a(Q.Z.handleInteger(e.target.value),"".concat(n,".").concat(i,".price"))}})}},{title:"Heart Shape Cost",dataIndex:"heartShapeCost",width:300,render:function(e,t,i){return(0,u.jsx)(k.Z,{placeholder:"Heart Shape Cost (In \u20b9)",value:e,onChange:function(e){a(Q.Z.handleFloat(e.target.value),"".concat(n,".").concat(i,".heartShapeCost"))}})}},{title:"Inventory",dataIndex:"inventory",width:300,render:function(e,t,i){return(0,u.jsx)(k.Z,{placeholder:"Inventory ",value:e,onChange:function(e){a(Q.Z.handleFloat(e.target.value),"".concat(n,".").concat(i,".inventory"))}})}},{title:"Action",dataIndex:"price",width:100,render:function(e,i,r){return(0,u.jsxs)(u.Fragment,{children:[r+1===t.length?(0,u.jsx)(c.Z,{icon:(0,u.jsx)(R.Z,{}),shape:"circle",type:"dashed",onClick:function(){a([].concat((0,se.Z)(t),[{}]),n)}}):null,r+1===t.length&&0!==r?(0,u.jsx)(c.Z,{icon:(0,u.jsx)(We.Z,{}),shape:"circle",type:"dashed",className:"mx-2",danger:!0,onClick:function(){t.pop(),a((0,se.Z)(t),n)}}):null]})}}],dataSource:null!==t&&void 0!==t&&t.length?null===t||void 0===t?void 0:t.map((function(e,t){return(0,x.Z)((0,x.Z)({},e),{},{key:t})})):[]})]})}var et=function(){function e(){(0,U.Z)(this,e)}return(0,N.Z)(e,null,[{key:"list",value:function(e){return A.Z.get(this.baseURL+"/list",{params:e})}},{key:"save",value:function(e,t){return A.Z.post(this.baseURL+"/save",e,{params:t})}},{key:"delete",value:function(e){return A.Z.post(this.baseURL+"/delete",{ids:e})}},{key:"details",value:function(e){return A.Z.get(this.baseURL+"/details/"+e)}}]),e}();function tt(){var e=(0,i.useState)([]),t=(0,f.Z)(e,2),n=t[0],a=t[1],r=(0,i.useState)(!1),l=(0,f.Z)(r,2),s=l[0],o=l[1],d=(0,i.useState)([]),h=(0,f.Z)(d,2),p=h[0],g=h[1],y=(0,i.useState)({page:1,limit:20}),b=(0,f.Z)(y,2),C=b[0],I=b[1],S=(0,i.useState)([]),k=(0,f.Z)(S,2),w=k[0],R=k[1],P=(0,i.useState)([]),U=(0,f.Z)(P,2),N=U[0],A=U[1],O=(0,i.useRef)(),F=[{title:"#",width:30,render:function(e,t,n){return(0,u.jsx)("b",{children:n+1})}},{title:"Title",dataIndex:"title",width:150},{title:"Products",dataIndex:"productDetails",width:350,render:function(e){return e.map((function(e){return(0,u.jsx)(m.Z,{children:e.name},e._id)}))}},{title:"Discount Percent",dataIndex:"discountPercent",width:100},{title:"Max Discount",dataIndex:"maxDiscountValue",width:100},{title:"Min Order Price",dataIndex:"minimunOrderPrice",width:100},{title:"Duration",dataIndex:"startDate",width:200,render:function(e,t){return(0,u.jsxs)("span",{children:[z()(e).format("DD MMM YYYY")," To ",z()(t.endDate).format("DD MMM YYYY")," "]})}},{title:"Action",dataIndex:"_id",width:70,render:function(e,t){return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(Z.Z,{title:"Are you sure to delete this User?",onConfirm:function(){B(t._id)},okText:"Yes",cancelText:"No",children:[(0,u.jsx)(c.Z,{type:"primary",size:"small",danger:!0,icon:(0,u.jsx)(D.Z,{})}),"\xa0"]}),(0,u.jsx)(c.Z,{type:"primary",size:"small",icon:(0,u.jsx)(T.Z,{}),onClick:function(){O.current.openForm(t)}})]})}}].filter((function(e){return!e.hidden}));function q(){o(!0),et.list(C).then((function(e){var t;a(null===(t=e.data)||void 0===t?void 0:t.map((function(e){return(0,x.Z)({key:e._id},e)})).reverse()),I((0,x.Z)((0,x.Z)({},C),{},{limit:e.extra.limit,page:e.extra.page,total:e.extra.total}))})).catch((function(e){})).finally((function(){o(!1)}))}var B=function(e){et.delete(e).then((function(e){E(e.message),q(),g([])})).catch((function(e){E(e.message,"error")}))},M=F.map((function(e){return(0,x.Z)((0,x.Z)({},e),{},{ellipsis:!1})}));M[0].fixed=!0,M[M.length-1].fixed="right";var Y={bordered:!0,loading:s,size:"small",title:function(){return(0,u.jsx)(nt,{addNewModalRef:O,selected:p,deleteData:B,qData:C,setQData:I,list:q})},showHeader:!0,footer:function(){return(0,u.jsx)(_,{qData:C,setQData:I})},rowSelection:{onChange:function(e){g(e)}},tableLayout:void 0};return(0,i.useEffect)((function(){q(),je.listUser({isAll:1,type:"product"}).then((function(e){R(e.data||[])})).catch((function(e){E("Product data not loaded","error")})),L.listUser().then((function(e){A(e.data||[])})).catch((function(e){E("User data not loaded","error")}))}),[C.page,C.limit]),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(v.Z.Title,{level:5,style:{marginTop:0},children:"List of Offer"}),(0,u.jsx)(j.Z,(0,x.Z)((0,x.Z)({},Y),{},{pagination:{position:["none"],pageSize:C.limit},columns:M,dataSource:n.length?n:[],scroll:{y:"calc(100vh - 340px)",x:"calc(100vw - 387px)"}})),(0,u.jsx)(it,{ref:O,list:q,product:w,user:N})]})}function nt(e){var t=e.addNewModalRef,n=e.selected,i=e.deleteData,a=e.qData,r=(e.setQData,e.list);return(0,u.jsx)(g.Z,{onSubmitCapture:r,className:"search-form",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{xs:24,xl:4,children:(0,u.jsx)(g.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(k.Z,{placeholder:"Search by title",value:a.key,onChange:function(e){return t=e.target.value,a[n="key"]=t,void(void 0!==t&&""!==t||(delete a[n],r()));var t,n},allowClear:!0})})}),(0,u.jsx)(b.Z,{span:3,children:(0,u.jsx)(g.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(c.Z,{type:"primary",htmlType:"submit",children:"Search"})})}),(0,u.jsxs)(b.Z,{span:5,children:[(0,u.jsx)(g.Z.Item,{style:{marginBottom:0,float:"right"},children:(0,u.jsx)(c.Z,{type:"primary",icon:(0,u.jsx)(R.Z,{}),onClick:function(){t.current.openForm()},children:"Add New"})}),n.length?(0,u.jsx)(Z.Z,{title:"Are you sure to delete these selected images?. Be sure to delete the image from server.",onConfirm:function(){i(n)},okText:"Yes",cancelText:"No",children:(0,u.jsx)(c.Z,{type:"primary",danger:!0,style:{float:"right"},icon:(0,u.jsx)(D.Z,{}),children:"Delete Selected"})}):null]})]})})}et.baseURL="offer";var it=(0,i.forwardRef)((function(e,t){var n=e.list,a=e.product,r=(0,i.useState)(!1),l=(0,f.Z)(r,2),s=l[0],o=l[1],d=(0,i.useState)({aspect:1}),h=(0,f.Z)(d,2),p=h[0],m=h[1],Z=(0,i.useState)(!1),v=(0,f.Z)(Z,2),j=v[0],D=v[1],T=(0,i.useState)([]),R=(0,f.Z)(T,2),U=R[0],N=R[1],A=function(e){m((0,x.Z)((0,x.Z)({},p),e))};(0,i.useImperativeHandle)(t,(function(){return{openForm:function(e){var t;o(!0),m(e?(0,x.Z)({},e):{fileType:"photo"}),null!==e&&void 0!==e&&null!==(t=e.img)&&void 0!==t&&t.url?N([null===e||void 0===e?void 0:e.img]):N([])}}}));var O=function(){D(!0),et.save(p).then((function(e){E(e.message),A((0,x.Z)({},e.data)),n(),o(!1)})).catch((function(e){"object"===typeof e.message?E(e.message[Object.keys(e.message)[0]],"error"):E(e.message,"error")})).finally((function(){D(!1)}))};return(0,i.useEffect)((function(){p._id||A({slug:Q.Z.removeSpecialChars(p.title)})}),[p.title]),(0,i.useEffect)((function(){m((0,x.Z)((0,x.Z)({},p),{},{img:null===U||void 0===U?void 0:U[0]}))}),[U]),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(I.Z,{title:(p._id?"Edit":"Add")+" Offer",style:{top:20},open:s,okText:"Save",onOk:O,okButtonProps:{disabled:j},onCancel:function(){o(!1)},destroyOnClose:!0,maskClosable:!1,width:800,className:"app-modal-body",footer:[(0,u.jsx)(c.Z,{onClick:function(){o(!1)},children:"Cancel"},"cancel"),(0,u.jsx)(c.Z,{type:"primary",onClick:O,children:"Save"},"save")],children:(0,u.jsx)(S.Z,{spinning:j,indicator:(0,u.jsx)(P.Z,{style:{fontSize:24},spin:!0}),children:(0,u.jsx)(g.Z,{layout:"vertical",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(g.Z.Item,{label:"Title",required:!0,children:(0,u.jsx)(k.Z,{placeholder:"Title",value:p.title,onChange:function(e){A({title:e.target.value})}})})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(g.Z.Item,{label:"Slug",required:!0,children:(0,u.jsx)(k.Z,{placeholder:"Slug",value:p.slug,onChange:function(e){A({slug:Q.Z.removeSpecialChars(e.target.value)})}})})}),(0,u.jsx)(b.Z,{span:8,children:(0,u.jsx)(g.Z.Item,{label:"Discount Percent",required:!0,children:(0,u.jsx)(k.Z,{type:"number",placeholder:"Discount Percent",value:p.discountPercent,onChange:function(e){A({discountPercent:e.target.value})}})})}),(0,u.jsx)(b.Z,{span:8,children:(0,u.jsx)(g.Z.Item,{label:"Duration",required:!0,children:(0,u.jsx)(w.Z.RangePicker,{format:"DD MMM YYYY",value:p.startDate&&p.endDate&&[Y()(p.startDate),Y()(p.endDate)],onChange:function(e){A({startDate:null!==e&&void 0!==e&&e[0]?new Date(null===e||void 0===e?void 0:e[0]):null,endDate:null!==e&&void 0!==e&&e[1]?new Date(null===e||void 0===e?void 0:e[1]):null})},style:{width:"100%"}})})}),(0,u.jsx)(b.Z,{span:6,children:(0,u.jsx)(g.Z.Item,{label:"Photo",children:(0,u.jsx)(pe,{fileList:U,setFileList:N,count:1,listType:"picture"})})}),(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(g.Z.Item,{label:"Product",required:!0,children:(0,u.jsx)(C.Z,{mode:"multiple",value:p.productIds,onChange:function(e){A({productIds:e})},options:a.map((function(e){return{value:e._id,label:e.name}}))})})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(g.Z.Item,{label:"Status",required:!0,children:(0,u.jsxs)(C.Z,{defaultValue:!0,value:p.status,onChange:function(e){A({status:e})},children:[(0,u.jsx)(C.Z.Option,{value:!0,children:"Active"}),(0,u.jsx)(C.Z.Option,{value:!1,children:"Inactive"})]})})})]})})})})})}));function at(e){var t=e.parentId,n=(0,i.useState)([]),a=(0,f.Z)(n,2),r=a[0],l=a[1],s=(0,i.useState)(!1),o=(0,f.Z)(s,2),d=o[0],h=o[1],p=(0,i.useState)([]),g=(0,f.Z)(p,2),y=g[0],b=g[1],C=(0,i.useState)([]),I=(0,f.Z)(C,2),S=I[0],k=I[1],w=(0,i.useState)({page:1,limit:20,parentId:t,type:"addOn"}),R=(0,f.Z)(w,2),P=R[0],U=R[1],N=(0,i.useRef)(),A=[{title:"#",width:40,render:function(e,t,n){return(0,u.jsx)("b",{children:n+1})}},{title:"Name",dataIndex:"name",width:150},{title:"Image",dataIndex:"thumbImg",width:80,render:function(e){return(0,u.jsx)(ae.Z,{src:null===e||void 0===e?void 0:e.url,height:100,width:150})}},{title:"MRP",dataIndex:"variants",width:80,render:function(e){return null===e||void 0===e?void 0:e.map((function(e){return null===e||void 0===e?void 0:e.price}))}},{title:"GST",dataIndex:"gst",width:80,render:function(e){return e+" %"}},{title:"Inventory",dataIndex:"variants",width:80,render:function(e){return null===e||void 0===e?void 0:e.map((function(e){return null===e||void 0===e?void 0:e.inventory}))}},{title:"Slug",dataIndex:"slug",width:100},{title:"Status",dataIndex:"status",width:60,render:function(e){return e?(0,u.jsx)(m.Z,{color:"green",children:"Active"}):(0,u.jsx)(m.Z,{color:"red",children:"Inactive"})}},{title:"Action",dataIndex:"_id",width:70,render:function(e,t){return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(Z.Z,{title:"Are you sure to delete this data?",onConfirm:function(){L(t._id)},okText:"Yes",cancelText:"No",children:[(0,u.jsx)(c.Z,{type:"primary",size:"small",danger:!0,icon:(0,u.jsx)(D.Z,{})}),"\xa0"]}),(0,u.jsx)(c.Z,{type:"primary",size:"small",icon:(0,u.jsx)(T.Z,{}),onClick:function(){N.current.openForm(t)}})]})}}].filter((function(e){return!e.hidden}));function O(){h(!0),je.listUser(P).then((function(e){var t;l(null===(t=e.data)||void 0===t?void 0:t.map((function(e){return(0,x.Z)((0,x.Z)({},e),{},{key:e._id})}))),U((0,x.Z)((0,x.Z)({},P),{},{limit:e.extra.limit,page:e.extra.page,total:e.extra.total}))})).catch((function(e){})).finally((function(){h(!1)}))}var L=function(e){je.deleteUser(e).then((function(e){E(e.message),O(),b([])})).catch((function(e){E(e.message,"error")}))},F=A.map((function(e){return(0,x.Z)((0,x.Z)({},e),{},{ellipsis:!1})}));F[0].fixed=!0,F[F.length-1].fixed="right";var q={bordered:!0,loading:d,size:"small",title:function(){return(0,u.jsx)(rt,{addNewModalRef:N,selected:y,deleteData:L,qData:P,setQData:U,list:O})},showHeader:!0,footer:function(){return(0,u.jsx)(_,{qData:P,setQData:U})},rowSelection:{onChange:function(e){b(e)}},tableLayout:void 0};return(0,i.useEffect)((function(){O(),re.list().then((function(e){k(e.data||[])})).catch((function(e){E("Product data not loaded","error")}))}),[P.page,P.limit]),(0,u.jsxs)(u.Fragment,{children:[t?null:(0,u.jsx)(v.Z.Title,{level:5,style:{marginTop:0},children:"Product List"}),(0,u.jsx)(j.Z,(0,x.Z)((0,x.Z)({},q),{},{pagination:{position:["none"],pageSize:P.limit},columns:F,dataSource:r.length?r:[],scroll:{y:"calc(100vh - 340px)",x:"calc(100vw - 387px)"}})),(0,u.jsx)(lt,{ref:N,list:O,parentId:t,category:S})]})}function rt(e){var t=e.addNewModalRef,n=e.selected,i=e.deleteData,a=e.qData,r=(e.setQData,e.list);return(0,u.jsx)(g.Z,{onSubmitCapture:r,className:"search-form",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{xs:24,xl:4,children:(0,u.jsx)(g.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(k.Z,{placeholder:"Search by name or code",value:a.key,onChange:function(e){return t=e.target.value,a[n="key"]=t,void(void 0!==t&&""!==t||(delete a[n],r()));var t,n},allowClear:!0})})}),(0,u.jsx)(b.Z,{span:3,children:(0,u.jsx)(g.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(c.Z,{type:"primary",htmlType:"submit",children:"Search"})})}),(0,u.jsxs)(b.Z,{span:5,children:[(0,u.jsx)(g.Z.Item,{style:{marginBottom:0,float:"right"},children:(0,u.jsx)(c.Z,{type:"primary",icon:(0,u.jsx)(R.Z,{}),onClick:function(){t.current.openForm()},children:"Add New"})}),n.length?(0,u.jsx)(Z.Z,{title:"Are you sure to delete these selected data ?",onConfirm:function(){i(n)},okText:"Yes",cancelText:"No",children:(0,u.jsx)(c.Z,{type:"primary",danger:!0,style:{float:"right"},icon:(0,u.jsx)(D.Z,{}),children:"Delete Selected"})}):null]})]})})}var lt=(0,i.forwardRef)((function(e,t){var n,a,r,l,s=e.list,o=e.parentId,d=(0,i.useState)(!1),h=(0,f.Z)(d,2),p=h[0],m=h[1],Z=(0,i.useState)({aspect:1}),v=(0,f.Z)(Z,2),j=v[0],w=v[1],D=(0,i.useState)(!1),T=(0,f.Z)(D,2),R=T[0],U=T[1],N=(0,i.useState)([]),A=(0,f.Z)(N,2),O=A[0],L=A[1],F=function(e){w((0,x.Z)((0,x.Z)({},j),e))};(0,i.useImperativeHandle)(t,(function(){return{openForm:function(e){var t;m(!0),w(e?(0,x.Z)({},e):{parentId:o,type:"addOn",isPremium:!1,isBestSelling:!1,forBirthday:!1,forAnniversary:!1,isBestSellingCombos:!1,variants:[{}]}),null!==e&&void 0!==e&&null!==(t=e.thumbFile)&&void 0!==t&&t.url?L([null===e||void 0===e?void 0:e.thumbFile]):L([])}}}));var _=function(){U(!0),je.saveAddOnProduct(j).then((function(e){E(e.message),F((0,x.Z)({},e.data)),s(),m(!1)})).catch((function(e){"object"===typeof e.message?E(e.message[Object.keys(e.message)[0]],"error"):E(e.message,"error")})).finally((function(){U(!1)}))};return(0,i.useEffect)((function(){j._id&&(U(!0),je.detailUser(j._id).then((function(e){var t,n;w((null===e||void 0===e?void 0:e.data)||{}),L(null!==e&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&t.thumbImg?[null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.thumbImg]:[])})).catch((function(e){E(e.message,"error")})).finally((function(){U(!1)})))}),[j._id]),(0,i.useEffect)((function(){j._id||F(Q.Z.removeSpecialChars((null===j||void 0===j?void 0:j.name)||""))}),[j.name]),(0,i.useEffect)((function(){w((0,x.Z)((0,x.Z)({},j),{},{thumbImg:O[0]}))}),[O]),(0,i.useEffect)((function(){p||w({})}),[p]),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(I.Z,{title:(j._id?"Edit":"Add New")+" AddOn Product",style:{top:20},open:p,okText:"Save",onOk:_,okButtonProps:{disabled:R},onCancel:function(){m(!1)},destroyOnClose:!0,maskClosable:!1,width:600,className:"app-modal-body",footer:[(0,u.jsx)(c.Z,{onClick:function(){m(!1)},children:"Cancel"},"cancel"),(0,u.jsx)(c.Z,{type:"primary",onClick:_,children:"Save"},"save")],children:(0,u.jsx)(S.Z,{spinning:R,indicator:(0,u.jsx)(P.Z,{style:{fontSize:24},spin:!0}),children:(0,u.jsx)(g.Z,{layout:"vertical",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(g.Z.Item,{label:"Name",required:!0,children:(0,u.jsx)(k.Z,{placeholder:"Name",value:j.name,onChange:function(e){var t;w((0,x.Z)((0,x.Z)({},j),{},{name:e.target.value,variants:[(0,x.Z)((0,x.Z)({},null===j||void 0===j||null===(t=j.variants)||void 0===t?void 0:t[0]),{},{weight:e.target.value})]}))}})})}),(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(g.Z.Item,{label:"Slug",required:!0,children:(0,u.jsx)(k.Z,{placeholder:"Slug",value:j.slug,onChange:function(e){F(Q.Z.removeSpecialChars(e.target.value))}})})}),(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(g.Z.Item,{label:"Status",required:!0,children:(0,u.jsxs)(C.Z,{defaultValue:!0,value:j.status,onChange:function(e){F({status:e})},children:[(0,u.jsx)(C.Z.Option,{value:!0,children:"Active"}),(0,u.jsx)(C.Z.Option,{value:!1,children:"Inactive"})]})})}),(0,u.jsx)(b.Z,{span:8,children:(0,u.jsx)(g.Z.Item,{label:"MPR",children:(0,u.jsx)(k.Z,{addonBefore:"\u20b9",placeholder:"Price",value:null===j||void 0===j||null===(n=j.variants)||void 0===n||null===(a=n[0])||void 0===a?void 0:a.price,onChange:function(e){var t;w((0,x.Z)((0,x.Z)({},j),{},{variants:[(0,x.Z)((0,x.Z)({},null===j||void 0===j||null===(t=j.variants)||void 0===t?void 0:t[0]),{},{price:Q.Z.handleInteger(e.target.value)})]}))}})})}),(0,u.jsx)(b.Z,{span:8,children:(0,u.jsx)(g.Z.Item,{label:"GST in (%)",children:(0,u.jsx)(k.Z,{addonBefore:"%",placeholder:"Ex.- 12",value:null===j||void 0===j?void 0:j.gst,onChange:function(e){w((0,x.Z)((0,x.Z)({},j),{},{gst:Q.Z.handleInteger(e.target.value)}))}})})}),(0,u.jsx)(b.Z,{span:8,children:(0,u.jsx)(g.Z.Item,{label:"Inventory",children:(0,u.jsx)(k.Z,{placeholder:"Inventory",value:null===j||void 0===j||null===(r=j.variants)||void 0===r||null===(l=r[0])||void 0===l?void 0:l.inventory,onChange:function(e){var t;w((0,x.Z)((0,x.Z)({},j),{},{variants:[(0,x.Z)((0,x.Z)({},null===j||void 0===j||null===(t=j.variants)||void 0===t?void 0:t[0]),{},{inventory:Q.Z.handleInteger(e.target.value)})]}))}})})}),(0,u.jsx)(b.Z,{span:6,children:(0,u.jsx)(g.Z.Item,{label:"Thumbnail Photo",children:(0,u.jsx)(pe,{fileList:O,setFileList:L,listType:"picture"})})})]})})})})})})),st=function(){function e(){(0,U.Z)(this,e)}return(0,N.Z)(e,null,[{key:"list",value:function(e){return A.Z.get(this.baseURL+"/list",{params:e})}},{key:"save",value:function(e,t){return A.Z.post(this.baseURL+"/save",e,{params:t})}},{key:"delete",value:function(e){return A.Z.post(this.baseURL+"/delete",{ids:e})}},{key:"details",value:function(e){return A.Z.get(this.baseURL+"/details/"+e)}}]),e}();function ot(){var e=(0,i.useState)([]),t=(0,f.Z)(e,2),n=t[0],a=t[1],r=(0,i.useState)(!1),l=(0,f.Z)(r,2),s=l[0],o=l[1],d=(0,i.useState)([]),h=(0,f.Z)(d,2),p=h[0],g=h[1],y=(0,i.useState)({page:1,limit:20}),b=(0,f.Z)(y,2),C=b[0],I=b[1],S=(0,i.useRef)(),k=(0,i.useState)([]),w=(0,f.Z)(k,2),R=w[0],P=w[1],U=(0,i.useState)([]),N=(0,f.Z)(U,2),A=N[0],O=N[1],L=(0,i.useState)([]),F=(0,f.Z)(L,2),q=F[0],z=F[1],B=(0,i.useState)([]),M=(0,f.Z)(B,2),Y=M[0],Q=M[1],H=[{title:"#",width:40,render:function(e,t,n){return(0,u.jsx)("b",{children:n+1})}},{title:"Product ",dataIndex:"productDetails",render:function(e){return e.map((function(e){return(0,u.jsx)(m.Z,{children:e.name})}))}},{title:"Categories ",dataIndex:"categoryDetails",render:function(e){return e.map((function(e){return(0,u.jsx)(m.Z,{children:e.name})}))}},{title:"Banners ",dataIndex:"bannerDetails",render:function(e){return e.map((function(e){return(0,u.jsx)(ae.Z,{src:null===e||void 0===e?void 0:e.imgUrl,height:80})}))}},{title:"Offer ",dataIndex:"offerDetails",render:function(e){return e.map((function(e){return(0,u.jsx)(m.Z,{children:e.title})}))}},{title:"Display Order",dataIndex:"displayOrder",width:250},{title:"Display Type",dataIndex:"displayType",width:250},{title:"Slug",dataIndex:"slug",width:150},{title:"Action",dataIndex:"_id",width:70,render:function(e,t){return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(Z.Z,{title:"Are you sure to delete this data?",onConfirm:function(){W(t._id)},okText:"Yes",cancelText:"No",children:[(0,u.jsx)(c.Z,{type:"primary",size:"small",danger:!0,icon:(0,u.jsx)(D.Z,{})}),"\xa0"]}),(0,u.jsx)(c.Z,{type:"primary",size:"small",icon:(0,u.jsx)(T.Z,{}),onClick:function(){S.current.openForm(t)}})]})}}].filter((function(e){return!e.hidden}));function V(){o(!0),st.list(C).then((function(e){var t;a(null===(t=e.data)||void 0===t?void 0:t.map((function(e){return(0,x.Z)((0,x.Z)({},e),{},{key:e._id})}))),I((0,x.Z)((0,x.Z)({},C),{},{limit:e.extra.limit,page:e.extra.page,total:e.extra.total}))})).catch((function(e){})).finally((function(){o(!1)}))}(0,i.useEffect)((function(){V()}),[]);var W=function(e){st.delete(e).then((function(e){E(e.message),V(),g([])})).catch((function(e){E(e.message,"error")}))},J=H.map((function(e){return(0,x.Z)((0,x.Z)({},e),{},{ellipsis:!1})}));J[0].fixed=!0,J[J.length-1].fixed="right";var K={bordered:!0,loading:s,size:"small",title:function(){return(0,u.jsx)(dt,{addNewModalRef:S,selected:p,deleteData:W,qData:C,setQData:I,list:V})},showHeader:!0,footer:function(){return(0,u.jsx)(_,{qData:C,setQData:I})},rowSelection:{onChange:function(e){g(e)}},tableLayout:void 0};return(0,i.useEffect)((function(){je.listUser({isAll:1,type:"product"}).then((function(e){P(e.data.map((function(e){return(0,x.Z)((0,x.Z)({},e),{},{label:null===e||void 0===e?void 0:e.name,value:null===e||void 0===e?void 0:e._id})})))})),et.list({isAll:1}).then((function(e){z(e.data.map((function(e){return(0,x.Z)((0,x.Z)({},e),{},{label:null===e||void 0===e?void 0:e.title,value:null===e||void 0===e?void 0:e._id})})))})),re.list({isAll:1}).then((function(e){O(e.data.map((function(e){return(0,x.Z)((0,x.Z)({},e),{},{label:null===e||void 0===e?void 0:e.name,value:null===e||void 0===e?void 0:e._id})})))})),ve.bannerList({isAll:1}).then((function(e){console.log("banners:",e.data),Q(e.data.map((function(e){return(0,x.Z)((0,x.Z)({},e),{},{label:(0,u.jsx)(ae.Z,{src:null===e||void 0===e?void 0:e.image,height:80}),value:null===e||void 0===e?void 0:e._id})})))}))}),[C.page,C.limit]),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(v.Z.Title,{level:5,style:{marginTop:0},children:"Product List"}),(0,u.jsx)(j.Z,(0,x.Z)((0,x.Z)({},K),{},{pagination:{position:["none"],pageSize:C.limit},columns:J,dataSource:n.length?n:[],scroll:{y:"calc(100vh - 340px)",x:"calc(100vw - 387px)"}})),(0,u.jsx)(ct,{ref:S,list:V,allProduct:R,allBanners:Y,allCategories:A,allOffers:q})]})}function dt(e){var t=e.addNewModalRef,n=e.selected,i=e.deleteData,a=(e.qData,e.setQData,e.list);return(0,u.jsx)(g.Z,{onSubmitCapture:a,className:"search-form",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{span:3,children:(0,u.jsx)(g.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(c.Z,{type:"primary",htmlType:"submit",children:"Reload"})})}),(0,u.jsxs)(b.Z,{span:5,children:[(0,u.jsx)(g.Z.Item,{style:{marginBottom:0,float:"right"},children:(0,u.jsx)(c.Z,{type:"primary",icon:(0,u.jsx)(R.Z,{}),onClick:function(){t.current.openForm()},children:"Add New"})}),n.length?(0,u.jsx)(Z.Z,{title:"Are you sure to delete these selected data ?",onConfirm:function(){i(n)},okText:"Yes",cancelText:"No",children:(0,u.jsx)(c.Z,{type:"primary",danger:!0,style:{float:"right"},icon:(0,u.jsx)(D.Z,{}),children:"Delete Selected"})}):null]})]})})}st.baseURL="homepageitems";var ct=(0,i.forwardRef)((function(e,t){var n=e.list,a=e.allProduct,r=e.allBanners,l=e.allCategories,s=e.allOffers,o=(0,i.useState)(!1),d=(0,f.Z)(o,2),h=d[0],p=d[1],m=(0,i.useState)({aspect:1}),Z=(0,f.Z)(m,2),v=Z[0],j=Z[1],w=(0,i.useState)(!1),D=(0,f.Z)(w,2),T=D[0],R=D[1],U=function(e,t){for(var n=v,i=t.split("."),a=0;a<i.length;a++)a+1===i.length?n[i[a]]=e:("undefined"===typeof n[i[a]]&&(1*parseInt(i[a+1])>=0?n[i[a]]=[]:n[i[a]]={}),n=n[i[a]]);j((0,x.Z)({},v))};(0,i.useImperativeHandle)(t,(function(){return{openForm:function(e){p(!0),j(e?(0,x.Z)({},e):{})}}}));var N=function(){R(!0),st.save(v).then((function(e){E(e.message),n(),p(!1)})).catch((function(e){"object"===typeof e.message?E(e.message[Object.keys(e.message)[0]],"error"):E(e.message,"error")})).finally((function(){R(!1)}))};return(0,i.useEffect)((function(){v._id&&(R(!0),st.details(v._id).then((function(e){j(e.data||{})})).catch((function(e){E(e.message,"error")})).finally((function(){R(!1)})))}),[v._id]),(0,i.useEffect)((function(){v._id||U(Q.Z.removeSpecialChars(v.slug||""),"slug")}),[v.slug]),(0,i.useEffect)((function(){h||j({})}),[h]),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(I.Z,{title:(v._id?"Edit":"Add New")+" Product",style:{top:20},open:h,okText:"Save",onOk:N,okButtonProps:{disabled:T},onCancel:function(){p(!1)},destroyOnClose:!0,maskClosable:!1,width:1e3,className:"app-modal-body",footer:[(0,u.jsx)(c.Z,{onClick:function(){p(!1)},children:"Cancel"},"cancel"),(0,u.jsx)(c.Z,{type:"primary",onClick:N,children:"Save"},"save")],children:(0,u.jsx)(S.Z,{spinning:T,indicator:(0,u.jsx)(P.Z,{style:{fontSize:24},spin:!0}),children:(0,u.jsx)(g.Z,{layout:"vertical",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(g.Z.Item,{label:"Type",required:!0,children:(0,u.jsxs)(C.Z,{value:v.type,onChange:function(e){U(e,"type")},children:[(0,u.jsx)(C.Z.Option,{value:"category",children:"Category"}),(0,u.jsx)(C.Z.Option,{value:"banner",children:"Banner"}),(0,u.jsx)(C.Z.Option,{value:"offer",children:"Offer"}),(0,u.jsx)(C.Z.Option,{value:"products",children:"Products"})]})})}),"products"===v.type&&(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(g.Z.Item,{label:"Choose Product",required:!0,children:(0,u.jsx)(C.Z,{mode:"multiple",placeholder:"Choose Products",onChange:function(e){U(e,"productIds")},optionLabelProp:"label",allowClear:!0,value:v.productIds,options:a.filter((function(e){return!0}))})})}),"banner"===v.type&&(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(g.Z.Item,{label:"Choose Banners",required:!0,children:(0,u.jsx)(C.Z,{mode:"multiple",placeholder:"Choose Banners",className:"banners",onChange:function(e){U(e,"bannerIds")},optionLabelProp:"label",allowClear:!0,value:v.bannerIds,options:r.filter((function(e){return!0}))})})}),"category"===v.type&&(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(g.Z.Item,{label:"Choose Categories",required:!0,children:(0,u.jsx)(C.Z,{mode:"multiple",placeholder:"Choose Categories",onChange:function(e){U(e,"categoryIds")},optionLabelProp:"label",allowClear:!0,value:v.categoryIds,options:l.filter((function(e){return!0}))})})}),"offer"===v.type&&(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(g.Z.Item,{label:"Choose Offers",required:!0,children:(0,u.jsx)(C.Z,{mode:"multiple",placeholder:"Choose Offers",onChange:function(e){U(e,"offerIds")},optionLabelProp:"label",allowClear:!0,value:v.offerIds,options:s.filter((function(e){return!0}))})})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(g.Z.Item,{label:"Title",children:(0,u.jsx)(k.Z,{placeholder:"title",value:v.title,onChange:function(e){U(e.target.value,"title")}})})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(g.Z.Item,{label:"Slug",required:!0,children:(0,u.jsx)(k.Z,{placeholder:"slug",value:v.slug,onChange:function(e){U(Q.Z.removeSpecialChars(e.target.value),"slug")}})})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(g.Z.Item,{label:"Display Order",required:!0,children:(0,u.jsx)(k.Z,{placeholder:"1",type:"number",value:v.displayOrder,onChange:function(e){U(e.target.value,"displayOrder")}})})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(g.Z.Item,{label:"Display Type",required:!0,children:(0,u.jsxs)(C.Z,{value:v.displayType,onChange:function(e){U(e,"displayType")},children:[(0,u.jsx)(C.Z.Option,{value:"grid",children:"Grid"}),(0,u.jsx)(C.Z.Option,{value:"scroll",children:"Scroll"})]})})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(g.Z.Item,{label:"Status",required:!0,children:(0,u.jsxs)(C.Z,{value:v.status,onChange:function(e){U(e,"status")},children:[(0,u.jsx)(C.Z.Option,{value:!0,children:"Active"}),(0,u.jsx)(C.Z.Option,{value:!1,children:"Inactive"})]})})})]})})})})})})),ut=n(7174),ht=n(9529),pt=function(){function e(){(0,U.Z)(this,e)}return(0,N.Z)(e,null,[{key:"list",value:function(e){return A.Z.get("ecommerce/order/list",{params:e})}},{key:"save",value:function(e,t){return A.Z.post("ecommerce/order/save",e,{params:t})}},{key:"delete",value:function(e){return A.Z.post("ecommerce/order/delete",{ids:e})}},{key:"details",value:function(e){return A.Z.get("ecommerce/order/details/"+e)}}]),e}();pt.baseURL="";var xt=function(){function e(){(0,U.Z)(this,e)}return(0,N.Z)(e,null,[{key:"list",value:function(e){return A.Z.get("delivery-boy/list",{params:e})}},{key:"save",value:function(e,t){return A.Z.post("delivery-boy/create",e,{params:t})}},{key:"delete",value:function(e){return A.Z.post("delivery-boy/delete",{ids:e})}},{key:"details",value:function(e){return A.Z.get("delivery-boy/details/"+e)}}]),e}();function ft(){var e=(0,i.useState)([]),t=(0,f.Z)(e,2),n=t[0],a=t[1],r=(0,i.useState)([]),l=(0,f.Z)(r,2),s=l[0],o=l[1],d=(0,i.useState)(!1),h=(0,f.Z)(d,2),p=h[0],Z=h[1],g=(0,i.useState)({page:1,limit:20,date:new Date,status:"Confirmed"}),y=(0,f.Z)(g,2),b=y[0],C=y[1],I=(0,i.useRef)(),S=[{title:"Order id",dataIndex:"orderId",width:300},{title:"Delivery Assign To",dataIndex:"deliveryBoyData",width:140,render:function(e){var t;return(0,u.jsx)("span",{children:null===(t=e[0])||void 0===t?void 0:t.name})}},{title:"Shipping Address",dataIndex:"addressDetails",width:400,render:function(e){var t=JSON.parse(e);return null!==t?(0,u.jsx)("span",{children:(null===t||void 0===t?void 0:t.landMark)+" "+(null===t||void 0===t?void 0:t.address)+" "+(null===t||void 0===t?void 0:t.city)+" "+(null===t||void 0===t?void 0:t.pin)}):(0,u.jsx)("span",{children:"Not Mentioned"})}},{title:"Total Amount",dataIndex:"priceDetails",width:90,render:function(e){return(0,u.jsxs)("span",{children:["\u20b9",e.finalPrice]})}},{title:"OrderedAt",dataIndex:"createdAt",width:180,render:function(e){return z()(e).format("dddd, MMMM Do YYYY")}},{title:"Status",dataIndex:"status",width:70,render:function(e,t){var n=t.status;return(0,u.jsx)(m.Z,{color:"green",children:n})}},{title:"Action",dataIndex:"_id",width:70,render:function(e,t){return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(c.Z,{type:"primary",size:"small",icon:(0,u.jsx)(ht.Z,{}),onClick:function(){I.current.openForm(t)}})})}}].filter((function(e){return!e.hidden}));function k(){Z(!0),pt.list(b).then((function(e){var t;a(null===(t=e.data)||void 0===t?void 0:t.map((function(e){return(0,x.Z)((0,x.Z)({},e),{},{key:e._id})}))),C((0,x.Z)((0,x.Z)({},b),{},{limit:e.extra.limit,page:e.extra.page,total:e.extra.total}))})).catch((function(e){})).finally((function(){Z(!1)}))}var w=function(e){pt.delete(e).then((function(e){E(e.message),k()})).catch((function(e){E(e.message,"error")}))},D=S.map((function(e){return(0,x.Z)((0,x.Z)({},e),{},{ellipsis:!1})}));D[0].fixed=!0,D[D.length-1].fixed="right";var T={bordered:!0,loading:p,size:"small",title:function(){return(0,u.jsx)(mt,{deliveryModalRef:I,deleteData:w,qData:b,setQData:C,list:k,user:s})},showHeader:!0,footer:function(){return(0,u.jsx)(_,{qData:b,setQData:C})},tableLayout:void 0};return(0,i.useEffect)((function(){k(),L.listUser().then((function(e){o(e.data||[])})).catch((function(e){E("User data not loaded","error")}))}),[b.page,b.limit]),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(v.Z.Title,{level:5,children:"List of Orders"}),(0,u.jsx)(j.Z,(0,x.Z)((0,x.Z)({},T),{},{pagination:{position:["none"],pageSize:b.limit},columns:D,dataSource:n.length?n:[],scroll:{y:"calc(100vh - 340px)",x:"calc(100vw - 387px)"},expandable:{expandedRowRender:function(e){var t,n,i;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(ut.Z,{title:"Receiver Info",children:[(0,u.jsx)(ut.Z.Item,{label:"UserName",children:null!==e&&void 0!==e&&e.userDetails?null===e||void 0===e?void 0:e.userDetails.name:"Not Accepted"}),(0,u.jsx)(ut.Z.Item,{label:"Email",children:null!==e&&void 0!==e&&e.userDetails?null===e||void 0===e?void 0:e.userDetails.email:"Empty"}),(0,u.jsx)(ut.Z.Item,{label:"Phone",children:null!==e&&void 0!==e&&e.userDetails?null===e||void 0===e?void 0:e.userDetails.phone:"Empty"}),(0,u.jsx)(ut.Z.Item,{label:"Gender",children:null!==e&&void 0!==e&&e.userDetails?null===e||void 0===e?void 0:e.userDetails.gender:"Empty"}),(0,u.jsx)(ut.Z.Item,{label:"Address",children:null!==(null===e||void 0===e?void 0:e.addressDetails)?(0,u.jsx)("span",{children:(null===(t=JSON.parse(null===e||void 0===e?void 0:e.addressDetails))||void 0===t?void 0:t.landMark)+""+(null===(n=JSON.parse(null===e||void 0===e?void 0:e.addressDetails))||void 0===n?void 0:n.address)+" , "+(null===(i=JSON.parse(null===e||void 0===e?void 0:e.addressDetails))||void 0===i?void 0:i.city)}):(0,u.jsx)("span",{children:"Not Mentioned"})})]}),(0,u.jsx)(ut.Z,{title:"Ordered Items"}),(0,u.jsx)("div",{style:{display:"flex"},children:(0,u.jsx)(j.Z,{bordered:!0,pagination:!1,size:"small",dataSource:[e],columns:[{dataIndex:"orders",width:1400,render:function(t,n){var i,a,r,l,s,o;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("span",{style:{margin:"0 10px"},children:"Item No."}),(0,u.jsx)("span",{style:{margin:"0 70px"},children:"Product Name"}),(0,u.jsx)("span",{style:{margin:"0 20px"},children:"Variant Name"}),(0,u.jsx)("span",{style:{margin:"0 10px"},children:"Quantity"}),(0,u.jsx)("span",{style:{margin:"0 40px"},children:"Price"}),(0,u.jsx)("span",{style:{margin:"0 40px"},children:"Offer/Disc."}),(0,u.jsx)("span",{style:{margin:"0 40px"},children:"Cake Message"}),(0,u.jsx)("span",{style:{margin:"0 40px"},children:"Heart Shape"}),(0,u.jsx)("span",{style:{margin:"0 40px"},children:"Extra"}),(0,u.jsx)("span",{style:{margin:"0 40px"},children:"Cake Photo"})]}),null===t||void 0===t?void 0:t.map((function(t,n){var i,a,r,l;return(0,u.jsxs)("div",{children:[(0,u.jsxs)("div",{children:[(0,u.jsxs)("span",{style:{margin:"0 15px",display:"inline-block",width:"60px"},children:[n+1,"."]}),(0,u.jsx)("span",{style:{margin:"0 40px",display:"inline-block",width:"150px"},children:null===e||void 0===e||null===(i=e.ProductDetails)||void 0===i?void 0:i.map((function(e){var n;return null===e||void 0===e||null===(n=e.variants)||void 0===n?void 0:n.map((function(n){if((null===n||void 0===n?void 0:n._id)===(null===t||void 0===t?void 0:t.productVariantId))return null===e||void 0===e?void 0:e.name}))}))}),(0,u.jsx)("span",{style:{margin:"0 10px",display:"inline-block",width:"100px"},children:null===e||void 0===e||null===(a=e.ProductDetails)||void 0===a?void 0:a.map((function(e){var n;return null===e||void 0===e||null===(n=e.variants)||void 0===n?void 0:n.map((function(e){if((null===e||void 0===e?void 0:e._id)===(null===t||void 0===t?void 0:t.productVariantId))return(0,u.jsx)(m.Z,{color:"green",children:null===e||void 0===e?void 0:e.weight})}))}))}),(0,u.jsx)("span",{style:{margin:"0 30px",display:"inline-block",width:"10px"},children:null===t||void 0===t?void 0:t.quantity}),(0,u.jsxs)("span",{style:{margin:"0 40px"},children:["\u20b9",null===t||void 0===t?void 0:t.price]}),(0,u.jsx)("span",{style:{margin:"0 40px"},children:(0,u.jsx)(m.Z,{color:"red",children:"NULL"})}),(0,u.jsx)("span",{style:{margin:"0 30px"},children:(0,u.jsx)("span",{children:(null===t||void 0===t?void 0:t.cakeMessage)||"No Message"})}),(0,u.jsx)("span",{style:{margin:"0 80px 0 100px"},children:(0,u.jsx)(m.Z,{color:!0===(null===e||void 0===e?void 0:e.isHeart)?"green":"red",children:!0===(null===t||void 0===t?void 0:t.isHeart)?"Yes":"No"})}),(0,u.jsx)("span",{style:{margin:"0 50px 0 10px"},children:!0===(null===e||void 0===e?void 0:e.isHeart)?"+100":"0"}),(0,u.jsx)("span",{style:{margin:"0 40px"},children:null!==t&&void 0!==t&&null!==(r=t.photoURL)&&void 0!==r&&r.url?(0,u.jsx)(ae.Z,{src:null===t||void 0===t||null===(l=t.photoURL)||void 0===l?void 0:l.url,height:80}):"No Image"})]}),(0,u.jsx)("hr",{})]})})),(0,u.jsx)("div",{style:{display:"flex",flexDirection:"row-reverse",width:"650px"},children:(0,u.jsxs)("div",{style:{marginLeft:"130px"},children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("span",{style:{margin:"0 5px",display:"inline-block",width:"70px"},children:(0,u.jsx)("b",{children:"GST"})}),(0,u.jsxs)("span",{style:{margin:"0 30px",marginRight:"60px"},children:[" ","\u20b9",null===e||void 0===e||null===(i=e.priceDetails)||void 0===i?void 0:i.gst," "]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("span",{style:{margin:"0 5px",display:"inline-block",width:"70px"},children:(0,u.jsx)("b",{children:"Final Price"})}),(0,u.jsxs)("span",{style:{margin:"0 30px",marginRight:"60px"},children:[" ","\u20b9",null===e||void 0===e||null===(a=e.priceDetails)||void 0===a?void 0:a.finalPrice," "]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("span",{style:{margin:"0 5px",display:"inline-block",width:"70px"},children:(0,u.jsx)("b",{children:"Discount"})}),(0,u.jsxs)("span",{style:{margin:"0 30px",marginRight:"60px"},children:[" ","\u20b9",null===e||void 0===e||null===(r=e.priceDetails)||void 0===r?void 0:r.discountPrice," "]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("span",{style:{margin:"0 5px",display:"inline-block",width:"70px"},children:(0,u.jsx)("b",{children:"Delivery"})}),(0,u.jsxs)("span",{style:{margin:"0 30px",marginRight:"60px"},children:[" ","\u20b9",null===e||void 0===e||null===(l=e.priceDetails)||void 0===l?void 0:l.delivery," "]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("span",{style:{margin:"0 5px",display:"inline-block",width:"70px"},children:(0,u.jsx)("b",{children:"Coupon"})}),(0,u.jsxs)("span",{style:{margin:"0 30px",marginRight:"60px"},children:[" ","\u20b9",null===e||void 0===e||null===(s=e.priceDetails)||void 0===s?void 0:s.couponDiscountPrice," "]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("span",{style:{margin:"0 5px",display:"inline-block",width:"70px"},children:(0,u.jsx)("b",{children:"Total"})}),(0,u.jsxs)("span",{style:{margin:"0 30px",marginRight:"60px"},children:[" ","\u20b9",null===e||void 0===e||null===(o=e.priceDetails)||void 0===o?void 0:o.finalPrice," "]})]})]})})]})}}]})})]})},rowExpandable:function(e){return"Not Expandable"!==e.userDetails}}})),(0,u.jsx)(Zt,{ref:I,list:k})]})}function mt(e){e.deleteData;var t=e.qData,n=(e.setQData,e.list),a=e.user,r=(0,i.useState)([]),l=(0,f.Z)(r,2),s=l[0],o=l[1],d=function(e,i){t[i]=e,void 0!==e&&""!==e||(t[i]="",n())};return(0,i.useEffect)((function(){var e=null===a||void 0===a?void 0:a.map((function(e){return{label:e.name?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("p",{style:{padding:"0px",margin:"0px"},children:e.name}),(0,u.jsx)("p",{style:{fontSize:"12px",margin:"0px"},children:(0,u.jsxs)(v.Z.Text,{type:"danger",children:["@",e.phone]})})]}):e.phone,value:e._id,searchKey:e.name+e.phone}}));o(e)}),[a]),(0,u.jsx)(g.Z,{onSubmitCapture:n,className:"search-form",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{span:4,children:(0,u.jsx)(g.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(k.Z,{placeholder:"Search by order id",onChange:function(e){return d(e.target.value,"key")},allowClear:!0})})}),(0,u.jsx)(b.Z,{xs:24,xl:4,children:(0,u.jsx)(g.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(C.Z,{showSearch:!0,allowClear:!0,placeholder:"Select by username / phone",optionFilterProp:"children",onChange:function(e){return d(e,"userId")},filterOption:function(e,t){var n;return(null!==(n=null===t||void 0===t?void 0:t.searchKey)&&void 0!==n?n:"").toLowerCase().includes(e.toLowerCase())},options:s})})}),(0,u.jsx)(b.Z,{xs:24,xl:4,children:(0,u.jsx)(g.Z.Item,{children:(0,u.jsxs)(C.Z,{defaultValue:"Initiated",allowClear:!0,placeholder:"Order Status",onChange:function(e){return d(e,"status")},children:[(0,u.jsx)(C.Z.Option,{value:"Initiated",children:"Initiated"}),(0,u.jsx)(C.Z.Option,{value:"Confirmed",children:"Confirmed"}),(0,u.jsx)(C.Z.Option,{value:"Delivered",children:"Delivered"}),(0,u.jsx)(C.Z.Option,{value:"Failed",children:"Failed"}),(0,u.jsx)(C.Z.Option,{value:"Pending",children:"Pending"}),(0,u.jsx)(C.Z.Option,{value:"Shipped",children:"Shipped"})]})})}),(0,u.jsx)(b.Z,{xs:24,xl:4,children:(0,u.jsx)(g.Z.Item,{children:(0,u.jsx)(w.Z,{defaultValue:Y()(z()(null===t||void 0===t?void 0:t.date).format("YYYY-MM-DD")),allowClear:!0,onChange:function(e){return d(e,"date")}})})}),(0,u.jsx)(b.Z,{span:3,children:(0,u.jsx)(g.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(c.Z,{type:"primary",htmlType:"submit",children:"Search"})})})]})})}xt.baseURL="";var Zt=(0,i.forwardRef)((function(e,t){var n=e.list,a=e.categoryId,r=(0,i.useState)(!1),l=(0,f.Z)(r,2),s=l[0],o=l[1],d=(0,i.useState)({aspect:1}),h=(0,f.Z)(d,2),p=h[0],m=h[1],Z=(0,i.useState)(!1),v=(0,f.Z)(Z,2),j=v[0],y=v[1],k=(0,i.useState)([]),w=(0,f.Z)(k,2),D=(w[0],w[1],(0,i.useState)([])),T=(0,f.Z)(D,2),R=(T[0],T[1],(0,i.useState)([])),U=(0,f.Z)(R,2),N=U[0],A=U[1];(0,i.useImperativeHandle)(t,(function(){return{openForm:function(e){o(!0),m(e?(0,x.Z)((0,x.Z)({},e),{},{ocassion:[],flavour:[],recipient:[],relation:[],specializationIds:[]}):{isPremium:!1,isBestSelling:!1,forBirthday:!1,forAnniversary:!1,isBestSellingCombos:!1,variants:[{}],ocassion:[],flavour:[],recipient:[],relation:[],specializationIds:[],categoryIds:[a]})}}}));var O=function(){y(!0),pt.save(p).then((function(e){console.log(e.data),B.ZP.success(e.message),n(),o(!1)})).catch((function(e){if("object"===typeof e.message){var t=e.message[Object.keys(e.message)[0]];B.ZP.error(t)}else E(e.message,"error")})).finally((function(){y(!1)}))};return(0,i.useEffect)((function(){y(!0),xt.list({status:"active"}).then((function(e){A(e.data)})).catch((function(e){})).finally((function(){y(!1)}))}),[s]),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(I.Z,{title:(p._id?"Edit":"Add New")+" Delivery Boy",style:{top:20},open:s,okText:"Save",onOk:O,okButtonProps:{disabled:j},onCancel:function(){o(!1)},destroyOnClose:!0,maskClosable:!1,width:700,height:500,className:"app-modal-body",footer:[(0,u.jsx)(c.Z,{onClick:function(){o(!1)},children:"Cancel"},"cancel"),(0,u.jsx)(c.Z,{type:"primary",onClick:O,children:"Save"},"save")],children:(0,u.jsx)(S.Z,{spinning:j,indicator:(0,u.jsx)(P.Z,{style:{fontSize:24},spin:!0}),children:(0,u.jsxs)(g.Z,{layout:"vertical",children:[(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(g.Z.Item,{label:"Delivery Assigned To",required:!0,children:(0,u.jsx)(C.Z,{mode:"single",value:p.deliveryBoyId,onChange:function(e){m((0,x.Z)((0,x.Z)({},p),{},{deliveryBoyId:e}))},options:null===N||void 0===N?void 0:N.map((function(e){return{value:e._id,label:e.name}}))})})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(g.Z.Item,{label:"Status",required:!0,children:(0,u.jsxs)(C.Z,{mode:"single",value:p.status,onChange:function(e){m((0,x.Z)((0,x.Z)({},p),{},{status:e}))},children:[(0,u.jsx)(C.Z.Option,{value:"Initiated",children:"Initiated"}),(0,u.jsx)(C.Z.Option,{value:"Confirmed",children:"Confirmed"}),(0,u.jsx)(C.Z.Option,{value:"Delivered",children:"Delivered"}),(0,u.jsx)(C.Z.Option,{value:"Failed",children:"Failed"}),(0,u.jsx)(C.Z.Option,{value:"Pending",children:"Pending"}),(0,u.jsx)(C.Z.Option,{value:"Shipped",children:"Shipped"})]})})})]})})})})}));function vt(e){var t=e.type,n=(0,i.useState)([]),a=(0,f.Z)(n,2),r=a[0],l=a[1],s=(0,i.useState)(!1),o=(0,f.Z)(s,2),d=o[0],h=o[1],p=(0,i.useState)([]),m=(0,f.Z)(p,2),g=m[0],y=m[1],b=(0,i.useState)({page:1,limit:20}),C=(0,f.Z)(b,2),I=C[0],S=C[1],k=(0,i.useRef)(),w=[{title:"#",width:30,render:function(e,t,n){return(0,u.jsx)("b",{children:n+1})}},{title:"name",dataIndex:"name"},{title:"Action",dataIndex:"_id",width:70,render:function(e,t){return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(Z.Z,{title:"Are you sure to delete this specialization?",onConfirm:function(){P(t._id)},okText:"Yes",cancelText:"No",children:[(0,u.jsx)(c.Z,{type:"primary",size:"small",danger:!0,icon:(0,u.jsx)(D.Z,{})}),"\xa0"]}),(0,u.jsx)(c.Z,{type:"primary",size:"small",icon:(0,u.jsx)(T.Z,{}),onClick:function(){k.current.openForm(t)}})]})}}].filter((function(e){return!e.hidden}));function R(){h(!0),Je.typeList((0,x.Z)((0,x.Z)({},I),{},{type:t})).then((function(e){var t;l(null===(t=e.data)||void 0===t?void 0:t.map((function(e){return(0,x.Z)({key:e._id},e)})).reverse()),S((0,x.Z)((0,x.Z)({},I),{},{limit:e.extra.limit,page:e.extra.page,total:e.extra.total}))})).catch((function(e){})).finally((function(){h(!1)}))}var P=function(e){Je.typeDelete(e).then((function(e){B.ZP.success(e.message),R(),y([])})).catch((function(e){B.ZP.error(e.message)}))},U=w.map((function(e){return(0,x.Z)((0,x.Z)({},e),{},{ellipsis:!1})}));U[0].fixed=!0,U[U.length-1].fixed="right";var N={bordered:!0,loading:d,size:"small",title:function(){return(0,u.jsx)(jt,{addNewModalRef:k,selected:g,deleteData:P,qData:I,setQData:S,list:R})},showHeader:!0,footer:function(){return(0,u.jsx)(_,{qData:I,setQData:S})},rowSelection:{onChange:function(e){y(e)}},tableLayout:void 0};return(0,i.useEffect)((function(){R()}),[I.page,I.limit,t]),(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("div",{style:{padding:"0px 10px",border1:"1px solid black"},children:[(0,u.jsx)(v.Z.Title,{level:5,style:{marginTop:0}}),(0,u.jsx)(j.Z,(0,x.Z)((0,x.Z)({},N),{},{pagination:{position:["none"],pageSize:I.limit},columns:U,dataSource:r.length?r:[],scroll:{y:"calc(100vh - 340px)",x:"calc(100vw - 387px)"}})),(0,u.jsx)(gt,{ref:k,list:R,type:t})]})})}function jt(e){var t=e.addNewModalRef,n=e.selected,i=e.deleteData,a=e.qData,r=(e.setQData,e.list);return(0,u.jsx)(g.Z,{onSubmitCapture:r,className:"search-form",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{xs:24,xl:4,children:(0,u.jsx)(g.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(k.Z,{placeholder:"Search by name",value:a.key,onChange:function(e){return t=e.target.value,a[n="key"]=t,void(void 0!==t&&""!==t||(delete a[n],r()));var t,n},allowClear:!0})})}),(0,u.jsx)(b.Z,{span:3,children:(0,u.jsx)(g.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(c.Z,{type:"primary",htmlType:"submit",children:"Search"})})}),(0,u.jsxs)(b.Z,{span:5,children:[(0,u.jsx)(g.Z.Item,{style:{marginBottom:0,float:"right"},children:(0,u.jsx)(c.Z,{type:"primary",icon:(0,u.jsx)(R.Z,{}),onClick:function(){t.current.openForm()},children:"Add New"})}),n.length?(0,u.jsx)(Z.Z,{title:"Are you sure to delete these selected images?. Be sure to delete the image from server.",onConfirm:function(){i(n)},okText:"Yes",cancelText:"No",children:(0,u.jsx)(c.Z,{type:"primary",danger:!0,style:{float:"right"},icon:(0,u.jsx)(D.Z,{}),children:"Delete Selected"})}):null]})]})})}var gt=(0,i.forwardRef)((function(e,t){var n=e.list,a=e.type,r=(0,i.useState)(!1),l=(0,f.Z)(r,2),s=l[0],o=l[1],d=(0,i.useState)({aspect:1}),h=(0,f.Z)(d,2),p=h[0],m=h[1],Z=(0,i.useState)(!1),v=(0,f.Z)(Z,2),j=v[0],C=v[1],w=function(e){m((0,x.Z)((0,x.Z)({},p),e))};(0,i.useImperativeHandle)(t,(function(){return{openForm:function(e){o(!0),m(e?(0,x.Z)({},e):{})}}}));var D=function(){C(!0),Je.typeSave((0,x.Z)((0,x.Z)({},p),{},{type:a})).then((function(e){B.ZP.success(e.message),w((0,x.Z)({},e.data)),n(),o(!1)})).catch((function(e){if("object"===typeof e.message){var t=e.message[Object.keys(e.message)[0]];B.ZP.error(t)}else B.ZP.error(e.message)})).finally((function(){C(!1)}))};return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(I.Z,{title:(p._id?"Edit":"Add")+" Specialization ",style:{top:20},open:s,okText:"Save",onOk:D,okButtonProps:{disabled:j},onCancel:function(){o(!1)},destroyOnClose:!0,maskClosable:!1,width:500,className:"app-modal-body",footer:[(0,u.jsx)(c.Z,{onClick:function(){o(!1)},children:"Cancel"},"cancel"),(0,u.jsx)(c.Z,{type:"primary",onClick:D,children:"Save"},"save")],children:(0,u.jsx)(S.Z,{spinning:j,indicator:(0,u.jsx)(P.Z,{style:{fontSize:24},spin:!0}),children:(0,u.jsx)(g.Z,{layout:"vertical",children:(0,u.jsx)(y.Z,{gutter:[12,2],children:(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(g.Z.Item,{label:"Title",required:!0,children:(0,u.jsx)(k.Z,{placeholder:"Title",value:p.name,onChange:function(e){w({name:e.target.value})}})})})})})})})})}));function yt(){var e=(0,i.useState)("ocassion"),t=(0,f.Z)(e,2),n=t[0],a=t[1];return(0,u.jsx)(J.Z,{onChange:function(e){a(e)},activeKey:n,items:[{label:"Occasion",key:"ocassion",children:(0,u.jsx)(vt,{type:n})},{label:"Recipient",key:"recipient",children:(0,u.jsx)(vt,{type:n})},{label:"Flavour",key:"flavour",children:(0,u.jsx)(vt,{type:n})},{label:"Relation",key:"relation",children:(0,u.jsx)(vt,{type:n})}]})}var bt=n(4942),Ct=n(7943),It=function(){function e(){(0,U.Z)(this,e)}return(0,N.Z)(e,null,[{key:"deliveryTypeDetails",value:function(e,t){return A.Z.get(this.baseURL+"/delivery-type/details/"+e,{params:t})}},{key:"deliveryTypeList",value:function(e){return A.Z.get(this.baseURL+"/delivery-type/list",{params:e})}},{key:"deliveryTypeSave",value:function(e,t){return A.Z.post(this.baseURL+"/delivery-type/save",e,{params:t})}},{key:"deliveryTypeDelete",value:function(e){return A.Z.post(this.baseURL+"/delivery-type/delete",{ids:e})}},{key:"deliveryDetails",value:function(e,t){return A.Z.get(this.baseURL+"/details/"+e,{params:t})}},{key:"deliveryList",value:function(e){return A.Z.get(this.baseURL+"/list",{params:e})}},{key:"deliverySave",value:function(e,t){return A.Z.post(this.baseURL+"/save",e,{params:t})}},{key:"deliveryDelete",value:function(e){return A.Z.post(this.baseURL+"/delete",{ids:e})}}]),e}();function St(){var e=(0,i.useState)([]),t=(0,f.Z)(e,2),n=t[0],a=t[1],r=(0,i.useState)(!1),l=(0,f.Z)(r,2),s=l[0],o=l[1],d=(0,i.useState)([]),h=(0,f.Z)(d,2),p=h[0],g=h[1],y=(0,i.useState)({page:1,limit:20}),b=(0,f.Z)(y,2),C=b[0],I=b[1],S=(0,i.useRef)(),k=[{title:"#",width:20,render:function(e,t,n){return(0,u.jsx)("b",{children:n+1})}},{title:"Name",dataIndex:"name",width:80},{title:"Charge",dataIndex:"charge",width:80},{title:"Status",dataIndex:"status",width:80,render:function(e){return e?(0,u.jsx)(m.Z,{color:"green",children:"Active"}):(0,u.jsx)(m.Z,{color:"red",children:"Inactive"})}},{title:"Action",dataIndex:"_id",width:70,render:function(e,t){return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(Z.Z,{title:"Are you sure to delete?. Be sure to delete the data from server.",onConfirm:function(){R(t._id)},okText:"Yes",cancelText:"No",children:[(0,u.jsx)(c.Z,{type:"primary",size:"small",danger:!0,icon:(0,u.jsx)(D.Z,{})}),"\xa0"]}),(0,u.jsx)(c.Z,{type:"primary",size:"small",icon:(0,u.jsx)(T.Z,{}),onClick:function(){S.current.openForm(t)}})]})}}].filter((function(e){return!e.hidden}));function w(){o(!0),It.deliveryList(C).then((function(e){var t;a(null===(t=e.data)||void 0===t?void 0:t.map((function(e){return(0,x.Z)((0,x.Z)({},e),{},{key:e._id})}))),I((0,x.Z)((0,x.Z)({},C),{},{limit:e.extra.limit,page:e.extra.page,total:e.extra.total}))})).catch((function(e){})).finally((function(){o(!1)}))}var R=function(e){It.deliveryDelete(e).then((function(e){E(e.message),w(),g([])})).catch((function(e){E(e.message,"error")}))},P=k.map((function(e){return(0,x.Z)((0,x.Z)({},e),{},{ellipsis:!1})}));P[0].fixed=!0,P[P.length-1].fixed="right";var U={bordered:!0,loading:s,size:"small",title:function(){return(0,u.jsx)(kt,{addNewModalRef:S,selected:p,deleteData:R,qData:C,setQData:I,list:w})},showHeader:!0,footer:function(){return(0,u.jsx)(_,{qData:C,setQData:I})},rowSelection:{onChange:function(e){g(e)}},tableLayout:void 0};return(0,i.useEffect)((function(){w()}),[C.page,C.limit]),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(v.Z.Title,{level:5,children:"List of Delivery"}),(0,u.jsx)(j.Z,(0,x.Z)((0,x.Z)({},U),{},{pagination:{position:["none"],pageSize:C.limit},columns:P,dataSource:n.length?n:[],scroll:{y:"calc(100vh - 340px)",x:"calc(100vw - 387px)"}})),(0,u.jsx)(wt,{ref:S,list:w})]})}function kt(e){var t=e.addNewModalRef,n=e.selected,i=e.deleteData,a=e.qData,r=(e.setQData,e.list);return(0,u.jsx)(g.Z,{onSubmitCapture:r,className:"search-form",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{xs:{span:24},sm:{span:16},md:{span:10},lg:{span:4},children:(0,u.jsx)(g.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(k.Z,{placeholder:"Search by title",value:a.key,onChange:function(e){return t=e.target.value,a[n="key"]=t,void(void 0!==t&&""!==t||(delete a[n],r()));var t,n},allowClear:!0})})}),(0,u.jsx)(b.Z,{span:3,children:(0,u.jsx)(g.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(c.Z,{type:"primary",htmlType:"submit",children:"Search"})})}),(0,u.jsxs)(b.Z,{span:5,children:[(0,u.jsx)(g.Z.Item,{style:{marginBottom:0,float:"right"},children:(0,u.jsx)(c.Z,{type:"primary",icon:(0,u.jsx)(R.Z,{}),onClick:function(){t.current.openForm()},children:"Add New"})}),n.length?(0,u.jsx)(Z.Z,{title:"Are you sure to delete?. Be sure to delete the data from server.",onConfirm:function(){i(n)},okText:"Yes",cancelText:"No",children:(0,u.jsx)(c.Z,{type:"primary",danger:!0,style:{float:"right"},icon:(0,u.jsx)(D.Z,{}),children:"Delete Selected"})}):null]})]})})}It.baseURL="delivery";var wt=(0,i.forwardRef)((function(e,t){var n=e.list,a=(0,i.useState)(!1),r=(0,f.Z)(a,2),l=r[0],s=r[1],o=(0,i.useState)({aspect:1}),d=(0,f.Z)(o,2),h=d[0],p=d[1],m=(0,i.useState)(!1),Z=(0,f.Z)(m,2),v=Z[0],j=Z[1],w=function(e){Object.entries(e).forEach((function(e){for(var t=h,n=e[0],i=e[1],a=n.split("."),r=0;r<a.length;r++)r+1===a.length?t[a[r]]=i:("undefined"===typeof t[a[r]]&&(1*parseInt(a[r+1])>=0?t[a[r]]=[]:t[a[r]]={}),t=t[a[r]])})),p((0,x.Z)({},h))};(0,i.useImperativeHandle)(t,(function(){return{openForm:function(e){s(!0),p(e?(0,x.Z)({},e):{status:!0,timings:[{startTime:"00:00:00",endTime:"00:00:00"}]})}}}));var D=function(){j(!0),It.deliverySave(h).then((function(e){E(e.message),w((0,x.Z)({},e.data)),n(),s(!1)})).catch((function(e){"object"===typeof e.message?E(e.message[Object.keys(e.message)[0]],"error"):E(e.message,"error")})).finally((function(){j(!1)}))};return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(I.Z,{title:(h._id?"Edit":"Add")+" Delivery",style:{top:20},open:l,okText:"Save",onOk:D,okButtonProps:{disabled:v},onCancel:function(){s(!1)},destroyOnClose:!0,maskClosable:!1,width:500,footer:[(0,u.jsx)(c.Z,{onClick:function(){s(!1)},children:"Cancel"},"cancel"),(0,u.jsx)(c.Z,{type:"primary",onClick:D,children:"Save"},"save")],children:(0,u.jsx)(S.Z,{spinning:v,indicator:(0,u.jsx)(P.Z,{style:{fontSize:24},spin:!0}),children:(0,u.jsx)(g.Z,{layout:"vertical",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(g.Z.Item,{label:"Name",required:!0,children:(0,u.jsx)(k.Z,{placeholder:"Name",value:h.name,onChange:function(e){w({name:e.target.value})}})})}),(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(g.Z.Item,{label:"Charge",required:!0,children:(0,u.jsx)(k.Z,{type:"number",placeholder:"Charge",value:h.charge,onChange:function(e){w({charge:e.target.value})}})})}),(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(Dt,{timingDetails:h.timings,parentKay:"timings",handleChange:w})}),(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(g.Z.Item,{label:"Status",required:!0,children:(0,u.jsxs)(C.Z,{value:h.status,onChange:function(e){w({status:e})},children:[(0,u.jsx)(C.Z.Option,{value:!0,children:"Active"}),(0,u.jsx)(C.Z.Option,{value:!1,children:"Inactive"})]})})})]})})})})})}));function Dt(e){var t=e.timingDetails,n=e.parentKay,i=e.handleChange;return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(j.Z,{bordered:!0,size:"small",showHeader:!0,footer:null,tableLayout:void 0,pagination:{position:["none"]},columns:[{title:"Start Time",dataIndex:"startTime",render:function(e,t,a){return(0,u.jsx)(Ct.Z,{onChange:function(e,t){i((0,bt.Z)({},"".concat(n,".").concat(a,".startTime"),t))},defaultValue:Y()(null===t||void 0===t?void 0:t.startTime,"HH:mm:ss")})}},{title:"End Time",dataIndex:"endTime",render:function(e,t,a){return(0,u.jsx)(Ct.Z,{onChange:function(e,t){i((0,bt.Z)({},"".concat(n,".").concat(a,".endTime"),t))},defaultValue:Y()(null===t||void 0===t?void 0:t.endTime,"HH:mm:ss")})}},{title:"Action",dataIndex:"price",width:100,render:function(e,a,r){return(0,u.jsxs)(u.Fragment,{children:[r+1===t.length?(0,u.jsx)(c.Z,{icon:(0,u.jsx)(R.Z,{}),shape:"circle",type:"dashed",onClick:function(){i((0,bt.Z)({},n,[].concat((0,se.Z)(t),[{startTime:"00:00:00",endTime:"00:00:00"}])))}}):null,r+1===t.length&&0!==r?(0,u.jsx)(c.Z,{icon:(0,u.jsx)(We.Z,{}),shape:"circle",type:"dashed",className:"mx-2",danger:!0,onClick:function(){t.pop(),i((0,bt.Z)({},n,(0,se.Z)(t)))}}):null]})}}],dataSource:null!==t&&void 0!==t&&t.length?t:[]})})}function Tt(){var e=(0,i.useState)(),t=(0,f.Z)(e,2),n=t[0],a=t[1],r=(0,i.useState)([]),l=(0,f.Z)(r,2),s=l[0],o=l[1];return(0,i.useEffect)((function(){re.list().then((function(e){var t,n;o(e.data||[]),a(null===(t=e.data)||void 0===t||null===(n=t[0])||void 0===n?void 0:n._id)}))}),[]),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(J.Z,{onChange:function(e){a(e)},activeKey:n,destroyInactiveTabPane:!0,items:s.map((function(e){return{label:e.name,key:e._id,productSpecialization:e.specialization,children:(0,u.jsx)(Ke,{productSpecialization:e.specialization,categoryId:e._id})}}))})})}var Rt=function(){function e(){(0,U.Z)(this,e)}return(0,N.Z)(e,null,[{key:"list",value:function(e){return A.Z.get(this.baseURL+"/list",{params:e})}},{key:"save",value:function(e,t){return A.Z.post(this.baseURL+"/save",e,{params:t})}},{key:"delete",value:function(e){return A.Z.post(this.baseURL+"/delete",{ids:e})}}]),e}();Rt.baseURL="settings";var Pt=[{type:"gst",title:"GST Percent",dataInput:"input",default:"0",iseditable:!1},{type:"referralAmount",title:"Referral Amount",dataInput:"input",default:"0",iseditable:!1},{type:"phone",title:"Phone Number(Support)",dataInput:"input",default:"xxxxxxxxxx",iseditable:!1},{type:"email",title:"email (Support)",dataInput:"input",default:"xxx....@test.com",iseditable:!1},{type:"whatsapp",title:"Whatsapp (Support)",dataInput:"input",default:"xxxxxxxxxx",iseditable:!1}],Ut=function(){var e=(0,i.useState)(Pt.map((function(e){return{type:e.type}}))),t=(0,f.Z)(e,2),n=t[0],a=t[1],r=(0,i.useState)(Pt),s=(0,f.Z)(r,2),o=s[0],d=s[1],h=(0,i.useState)({page:1,limit:20}),p=(0,f.Z)(h,2),m=p[0],Z=(p[1],(0,i.useState)(!1)),v=(0,f.Z)(Z,2),j=v[0],g=v[1],C=function(){g(!0),Rt.list(m).then((function(e){a(null===Pt||void 0===Pt?void 0:Pt.map((function(t){var n;return(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.find((function(e){return e.type===t.type})))||{type:t.type,value:t.default}})))})).catch((function(e){})).finally((function(){g(!1)}))};(0,i.useEffect)((function(){C()}),[]);return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(S.Z,{spinning:j,indicator:(0,u.jsx)(P.Z,{style:{fontSize:24},spin:!0}),children:(0,u.jsx)(y.Z,{gutter:[12,12],children:null===o||void 0===o?void 0:o.map((function(e,t){var i;return(0,u.jsx)(b.Z,{span:6,children:(0,u.jsx)(l.Z,{title:e.title,size:"small",extra:e.iseditable?(0,u.jsxs)(y.Z,{gutter:6,children:[(0,u.jsx)(b.Z,{children:(0,u.jsx)(c.Z,{type:"primary",size:"small",danger:!0,onClick:function(){return d(o.map((function(e,n){return t!==n?(0,x.Z)({},e):(0,x.Z)((0,x.Z)({},e),{},{iseditable:!1})})))},children:" Cancel "})}),(0,u.jsx)(b.Z,{children:(0,u.jsx)(c.Z,{type:"primary",size:"small",onClick:function(){!function(e){g(!0),Rt.save(e).then((function(t){E(t.message),d(o.map((function(t,n){return e.type!==t.type?(0,x.Z)({},t):(0,x.Z)((0,x.Z)({},t),{},{iseditable:!1})}))),C()})).catch((function(e){"object"===typeof e.message?E(e.message[Object.keys(e.message)[0]],"error"):E(e.message,"error")})).finally((function(){g(!1)}))}(null===n||void 0===n?void 0:n.find((function(t,n){return t.type===e.type})))},children:" Save "})})]}):(0,u.jsx)(c.Z,{type:"primary",size:"small",onClick:function(){return d(o.map((function(e,n){return t!==n?(0,x.Z)({},e):(0,x.Z)((0,x.Z)({},e),{},{iseditable:!0})})))},children:" Edit "}),children:"input"===e.dataInput?(0,u.jsx)(k.Z,{value:null===n||void 0===n||null===(i=n.find((function(t,n){return t.type===e.type})))||void 0===i?void 0:i.value,onChange:function(t){a(n.map((function(n,i){return n.type===e.type?(0,x.Z)((0,x.Z)({},n),{},{value:t.target.value}):(0,x.Z)({},n)})))},disabled:!e.iseditable}):null})},t)}))})})})},Nt=n(1306),At=n(8748);function Ot(){var e=(0,i.useState)({}),t=(0,f.Z)(e,2),n=t[0],a=t[1],r=(0,i.useState)([]),l=(0,f.Z)(r,2),s=l[0],o=l[1],d=(0,i.useState)(!1),c=(0,f.Z)(d,2),h=c[0],p=c[1],m=(0,i.useState)(!1),Z=(0,f.Z)(m,2),j=Z[0],C=Z[1],I=function(e,t){a((0,x.Z)((0,x.Z)({},n),{},(0,bt.Z)({},t,e)))};return(0,i.useEffect)((function(){p(!0),At.Z.profile().then((function(e){var t,n;a(e.data.result||{}),null!==(t=e.data.result)&&void 0!==t&&t.avatar&&o([null===(n=e.data.result)||void 0===n?void 0:n.avatar])})).catch((function(e){E(e.message,"error")})).finally((function(){p(!1)}))}),[]),(0,i.useEffect)((function(){j&&(p(!0),At.Z.saveProfile(n).then((function(e){E(e.message)})).catch((function(e){E(e.message,"error")})).finally((function(){p(!1)})))}),[n]),(0,i.useEffect)((function(){I(null===s||void 0===s?void 0:s[0],"avatar")}),[s]),(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)(S.Z,{spinning:h,indicator:(0,u.jsx)(P.Z,{style:{fontSize:24},spin:!0}),children:[(0,u.jsx)(Ve.Z,{}),[(0,u.jsx)(Nt.Z,{checkedChildren:"Update",unCheckedChildren:"Update",checked:j,onChange:function(e){C(e)},style:{marginLeft:"1500px"}},"do-save")],(0,u.jsx)(g.Z,{layout:"vertical",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{span:16,children:(0,u.jsxs)(y.Z,{gutter:[12,10],children:[(0,u.jsx)(b.Z,{span:12,children:(0,u.jsxs)(g.Z.Item,{label:(0,u.jsx)(v.Z.Text,{strong:!0,type:"secondary",children:"Name"}),children:[(0,u.jsx)(v.Z.Title,{editable:{editing:j,triggerType:j?"icon":"text",onChange:function(e){I(e,"name")}},level:5,children:n.name}),(0,u.jsx)(Ve.Z,{style:{margin:0}})]})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsxs)(g.Z.Item,{label:(0,u.jsx)(v.Z.Text,{strong:!0,type:"secondary",children:"User Name"}),children:[(0,u.jsx)(v.Z.Title,{editable:{editing:j,triggerType:j?"icon":"text",onChange:function(e){I(e,"userName")}},level:5,children:n.userName}),(0,u.jsx)(Ve.Z,{style:{margin:0}})]})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsxs)(g.Z.Item,{label:(0,u.jsx)(v.Z.Text,{strong:!0,type:"secondary",children:"Email"}),children:[(0,u.jsx)(v.Z.Title,{editable:{editing:j,triggerType:j?"icon":"text",onChange:function(e){I(e,"email")}},level:5,children:n.email}),(0,u.jsx)(Ve.Z,{style:{margin:0}})]})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsxs)(g.Z.Item,{label:(0,u.jsx)(v.Z.Text,{strong:!0,type:"secondary",children:"Phone Number"}),children:[(0,u.jsx)(v.Z.Title,{editable:{editing:j,triggerType:j?"icon":"text",onChange:function(e){I(e,"phone")}},level:5,children:n.phone}),(0,u.jsx)(Ve.Z,{style:{margin:0}})]})})]})}),(0,u.jsx)(b.Z,{span:8,children:(0,u.jsx)(pe,{fileList:s,setFileList:o,disabled:!j,cropImage:!0})})]})})]})})}function Lt(){var e=(0,i.useState)({name:p.Z.name}),t=(0,f.Z)(e,2),n=t[0],a=t[1],r=(0,i.useState)(!1),l=(0,f.Z)(r,2),s=l[0],o=l[1],d=function(e,t){a((0,x.Z)((0,x.Z)({},n),{},(0,bt.Z)({},t,e)))};return(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)(S.Z,{spinning:s,indicator:(0,u.jsx)(P.Z,{style:{fontSize:24},spin:!0}),children:[(0,u.jsx)(Ve.Z,{}),(0,u.jsx)(g.Z,{layout:"vertical",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{span:8,children:(0,u.jsx)(g.Z.Item,{label:"Current Password",children:(0,u.jsx)(k.Z.Password,{placeholder:"Current Password",value:n.currentPassword,onChange:function(e){d(e.target.value,"currentPassword")}})})}),(0,u.jsx)(b.Z,{span:16}),(0,u.jsx)(b.Z,{span:8,children:(0,u.jsx)(g.Z.Item,{label:"New Password",children:(0,u.jsx)(k.Z.Password,{placeholder:"New Password",value:n.newPassword,onChange:function(e){d(e.target.value,"newPassword")}})})}),(0,u.jsx)(b.Z,{span:16}),(0,u.jsx)(b.Z,{span:8,children:(0,u.jsx)(g.Z.Item,{label:"Confirm New Password",children:(0,u.jsx)(k.Z.Password,{placeholder:"Confirm New Password",value:n.confirmNewPassword,onChange:function(e){d(e.target.value,"confirmNewPassword")}})})}),(0,u.jsx)(b.Z,{span:16}),(0,u.jsx)(b.Z,{span:8,children:(0,u.jsx)(g.Z.Item,{children:n.currentPassword&&n.newPassword&&n.confirmNewPassword?(0,u.jsx)(c.Z,{type:"primary",style:{width:"100%"},htmlType:"submit",onClick:function(){o(!0),At.Z.updatePassword(n).then((function(e){E(e.message),a({})})).catch((function(e){E(e.message,"error")})).finally((function(){o(!1)}))},children:"Update Password"}):null})})]})})]})})}function Ft(e){var t=e.userId,n=(0,i.useState)([]),a=(0,f.Z)(n,2),r=a[0],l=a[1],s=(0,i.useState)(!1),o=(0,f.Z)(s,2),d=o[0],h=o[1],p=(0,i.useState)([]),g=(0,f.Z)(p,2),y=g[0],b=g[1],C=(0,i.useState)({page:1,limit:20,userId:t}),I=(0,f.Z)(C,2),S=I[0],k=I[1],w=(0,i.useRef)(),R=[{title:"#",width:40,render:function(e,t,n){return(0,u.jsx)("b",{children:n+1})}},{title:"Profile Photo",dataIndex:"avatar",width:100,render:function(e){return(0,u.jsx)(ae.Z,{src:null===e||void 0===e?void 0:e.url,height:150,width:150})}},{title:"Username",dataIndex:"name",width:150},{title:"Phone",dataIndex:"phone",width:100},{title:"Email",dataIndex:"email",width:200},{title:"Age",dataIndex:"age",width:50},{title:"Status",dataIndex:"status",width:80,render:function(e){return"blocked"===e?(0,u.jsx)(m.Z,{color:"red",children:"Blocked"}):"active"===e?(0,u.jsx)(m.Z,{color:"green",children:"Active"}):(0,u.jsx)(m.Z,{color:"yellow",children:"Inactive"})}},{title:"Action",dataIndex:"_id",width:50,render:function(e,t){return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(Z.Z,{title:"Are you sure to delete this User?",onConfirm:function(){U(t._id)},okText:"Yes",cancelText:"No",children:[(0,u.jsx)(c.Z,{type:"primary",size:"small",danger:!0,icon:(0,u.jsx)(D.Z,{})}),"\xa0"]}),(0,u.jsx)(c.Z,{type:"primary",size:"small",icon:(0,u.jsx)(T.Z,{}),onClick:function(){w.current.openForm(t._id)}})]})}}].filter((function(e){return!e.hidden}));function P(){h(!0),xt.list(S).then((function(e){var t;l(null===(t=e.data)||void 0===t?void 0:t.map((function(e){return(0,x.Z)((0,x.Z)({},e),{},{key:e._id})}))),k((0,x.Z)((0,x.Z)({},S),{},{limit:e.extra.limit,page:e.extra.page,total:e.extra.total}))})).catch((function(e){})).finally((function(){h(!1)}))}var U=function(e){xt.delete(e).then((function(e){E(e.message),P(),b([])})).catch((function(e){E(e.message,"error")}))},N=R.map((function(e){return(0,x.Z)((0,x.Z)({},e),{},{ellipsis:!1})}));N[0].fixed=!0,N[N.length-1].fixed="right";var A={bordered:!0,loading:d,size:"small",title:function(){return(0,u.jsx)(_t,{addNewModalRef:w,selected:y,deleteData:U,qData:S,setQData:k,list:P})},showHeader:!0,footer:function(){return(0,u.jsx)(_,{qData:S,setQData:k})},rowSelection:{onChange:function(e){b(e)}},tableLayout:void 0};return(0,i.useEffect)((function(){P()}),[S.page,S.limit]),(0,u.jsxs)(u.Fragment,{children:[t?null:(0,u.jsx)(v.Z.Title,{level:5,style:{marginTop:0},children:"List of Users"}),(0,u.jsx)(j.Z,(0,x.Z)((0,x.Z)({},A),{},{pagination:{position:["none"],pageSize:S.limit},columns:N,dataSource:r.length?r:[],scroll:{y:"calc(100vh - 340px)",x:"calc(100vw - 387px)"}})),(0,u.jsx)(qt,{ref:w,list:P,userId:t})]})}function _t(e){var t=e.addNewModalRef,n=e.selected,i=e.deleteData,a=e.qData,r=(e.setQData,e.list);return(0,u.jsx)(g.Z,{onSubmitCapture:r,className:"search-form",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{xs:24,xl:4,children:(0,u.jsx)(g.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(k.Z,{placeholder:"Search by Name",value:a.key,onChange:function(e){return t=e.target.value,a[n="key"]=t,void(void 0!==t&&""!==t||(delete a[n],r()));var t,n},allowClear:!0})})}),(0,u.jsx)(b.Z,{span:3,children:(0,u.jsx)(g.Z.Item,{style:{marginBottom:0},children:(0,u.jsx)(c.Z,{type:"primary",htmlType:"submit",children:"Search"})})}),(0,u.jsxs)(b.Z,{span:5,children:[(0,u.jsx)(g.Z.Item,{style:{marginBottom:0,float:"right"},children:(0,u.jsx)(c.Z,{type:"primary",icon:(0,u.jsx)(R.Z,{}),onClick:function(){t.current.openForm()},children:"Add New"})}),n.length?(0,u.jsx)(Z.Z,{title:"Are you sure to delete these selected images?. Be sure to delete the image from server.",onConfirm:function(){i(n)},okText:"Yes",cancelText:"No",children:(0,u.jsx)(c.Z,{type:"primary",danger:!0,style:{float:"right"},icon:(0,u.jsx)(D.Z,{}),children:"Delete Selected"})}):null]})]})})}var qt=(0,i.forwardRef)((function(e,t){var n=e.list,a=e.userId,r=(0,i.useState)(!1),l=(0,f.Z)(r,2),s=l[0],o=l[1],d=(0,i.useState)({aspect:1}),h=(0,f.Z)(d,2),p=h[0],m=h[1],Z=(0,i.useState)(!1),v=(0,f.Z)(Z,2),j=v[0],w=v[1],D=(0,i.useState)([]),T=(0,f.Z)(D,2),R=T[0],U=T[1],N=function(e){Object.entries(e).forEach((function(e){for(var t=p,n=e[0],i=e[1],a=n.split("."),r=0;r<a.length;r++)r+1===a.length?t[a[r]]=i:("undefined"===typeof t[a[r]]&&(1*parseInt(a[r+1])>=0?t[a[r]]=[]:t[a[r]]={}),t=t[a[r]])})),m((0,x.Z)({},p))};(0,i.useImperativeHandle)(t,(function(){return{openForm:function(e){o(!0),m(e?{_id:e}:{userId:a})}}}));var A=function(){w(!0),xt.save(p).then((function(e){E(e.message),N((0,x.Z)({},e.data)),n(),o(!1)})).catch((function(e){"object"===typeof e.message?E(e.message[Object.keys(e.message)[0]],"error"):E(e.message,"error")})).finally((function(){w(!1)}))};return(0,i.useEffect)((function(){p._id&&(w(!0),xt.details(p._id).then((function(e){var t,n;m(e.data||{}),U(null!==(t=e.data)&&void 0!==t&&t.avatar?[null===(n=e.data)||void 0===n?void 0:n.avatar]:[])})).catch((function(e){E(e.message,"error")})).finally((function(){w(!1)})))}),[p._id]),(0,i.useEffect)((function(){s?U([]):m({_id:null})}),[s]),(0,i.useEffect)((function(){N({avatar:null===R||void 0===R?void 0:R[0]})}),[R]),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(I.Z,{title:(p._id?"Edit":"Add")+" User",style:{top:20},open:s,okText:"Save",onOk:A,okButtonProps:{disabled:j},onCancel:function(){o(!1)},destroyOnClose:!0,maskClosable:!1,width:800,className:"app-modal-body",footer:[(0,u.jsx)(c.Z,{onClick:function(){o(!1)},children:"Cancel"},"cancel"),(0,u.jsx)(c.Z,{type:"primary",onClick:A,children:"Save"},"save")],children:(0,u.jsx)(S.Z,{spinning:j,indicator:(0,u.jsx)(P.Z,{style:{fontSize:24},spin:!0}),children:(0,u.jsx)(g.Z,{layout:"vertical",children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{span:20,children:(0,u.jsxs)(y.Z,{gutter:[12,2],children:[(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(g.Z.Item,{label:"Username",required:!0,children:(0,u.jsx)(k.Z,{placeholder:"John Doe",value:p.name,onChange:function(e){N({name:e.target.value})}})})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(g.Z.Item,{label:"Email",required:!0,children:(0,u.jsx)(k.Z,{placeholder:"Email",value:p.email,onChange:function(e){N({email:e.target.value})}})})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(g.Z.Item,{label:"Phone",required:!0,children:(0,u.jsx)(k.Z,{placeholder:"Phone",type:"number",value:p.phone,onChange:function(e){N({phone:e.target.value})}})})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsx)(g.Z.Item,{label:"Age",required:!0,children:(0,u.jsx)(k.Z,{placeholder:"Age",value:p.age,onChange:function(e){N({age:e.target.value})}})})})]})}),(0,u.jsx)(b.Z,{span:4,children:(0,u.jsx)(g.Z.Item,{label:"Avatar",children:(0,u.jsx)(pe,{fileList:R,setFileList:U,count:1})})}),(0,u.jsx)(b.Z,{span:10,children:(0,u.jsx)(g.Z.Item,{label:"Status",required:!0,children:(0,u.jsxs)(C.Z,{value:p.status,onChange:function(e){N({status:e})},children:[(0,u.jsx)(C.Z.Option,{value:"active",children:"Active"}),(0,u.jsx)(C.Z.Option,{value:"inactive",children:"Inactive"}),(0,u.jsx)(C.Z.Option,{value:"blocked",children:"Blocked"})]})})})]})})})})})})),zt=n(5273),Bt=function(){return(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)(y.Z,{gutter:[8,24],justify:"space-between",children:[(0,u.jsx)(b.Z,{span:24,children:(0,u.jsx)(v.Z.Title,{level:4,style:{marginLeft:"25px"},children:"Overview"})}),(0,u.jsx)(b.Z,{span1:6,children:(0,u.jsxs)(l.Z,{hoverable:!0,style:{width:300,backgroundColor:"#ce90e3",borderRadius:"26px"},children:[(0,u.jsx)(v.Z.Title,{level:4,style:{marginTop:"-13px"},children:"Total Order"}),(0,u.jsx)(v.Z.Title,{level:2,style:{},children:"47"})]})}),(0,u.jsx)(b.Z,{span1:6,children:(0,u.jsxs)(l.Z,{hoverable:!0,style:{width:300,backgroundColor:"#a8fdeb",borderRadius:"26px"},children:[(0,u.jsx)(v.Z.Title,{level:4,style:{marginTop:"-13px"},children:"Total Order Value"}),(0,u.jsx)(v.Z.Title,{level:2,style:{},children:"\u20b9 748569.68"})]})}),(0,u.jsx)(b.Z,{span1:6,children:(0,u.jsxs)(l.Z,{hoverable:!0,style:{width:300,backgroundColor:"#fffc80",borderRadius:"26px"},children:[(0,u.jsx)(v.Z.Title,{level:4,style:{marginTop:"-13px"},children:"Total Product Sale"}),(0,u.jsx)(v.Z.Title,{level:2,style:{},children:"1619"})]})}),(0,u.jsx)(b.Z,{span1:6,children:(0,u.jsxs)(l.Z,{hoverable:!0,style:{width:300,backgroundColor:"#9ef4ff",borderRadius:"26px"},children:[(0,u.jsx)(v.Z.Title,{level:4,style:{marginTop:"-13px"},children:"New User"}),(0,u.jsx)(v.Z.Title,{level:2,style:{},children:"89"})]})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsxs)(l.Z,{title:"Revenue",hoverable:!0,style:{width:655,height:"500px"},children:[(0,u.jsx)("p",{children:"Card content"}),(0,u.jsx)("p",{children:"Card content"}),(0,u.jsx)("p",{children:"Card content"})]})}),(0,u.jsx)(b.Z,{span:12,children:(0,u.jsxs)(l.Z,{title:"Weekly Wise Sale",hoverable:!0,style:{width:655,height:"500px"},children:[(0,u.jsx)(g.Z.Item,{label:"Methane",children:(0,u.jsx)(zt.Z,{percent:30})}),(0,u.jsx)(g.Z.Item,{label:"Butane",children:(0,u.jsx)(zt.Z,{percent:50,status:"active"})}),(0,u.jsx)(g.Z.Item,{label:"Propanol",children:(0,u.jsx)(zt.Z,{percent:70,status:"exception"})}),(0,u.jsx)(g.Z.Item,{label:"Alcohol",children:(0,u.jsx)(zt.Z,{percent:100})}),(0,u.jsx)(g.Z.Item,{label:"Methane",children:(0,u.jsx)(zt.Z,{percent:26})}),(0,u.jsx)(g.Z.Item,{label:"Butane",children:(0,u.jsx)(zt.Z,{percent:6,status:"active"})}),(0,u.jsx)(g.Z.Item,{label:"Propanol",children:(0,u.jsx)(zt.Z,{percent:16,status:"exception"})}),(0,u.jsx)(g.Z.Item,{label:"Alcohol",children:(0,u.jsx)(zt.Z,{percent:19})}),(0,u.jsx)(g.Z.Item,{label:"Propanol",children:(0,u.jsx)(zt.Z,{percent:16,status:"exception"})}),(0,u.jsx)(g.Z.Item,{label:"Alcohol",children:(0,u.jsx)(zt.Z,{percent:19})})]})})]})})},Et=n(4123),Mt=n(3197),Yt=n(9085),Qt=(n(5462),Et.ZP.connect(Mt.Z.apiIpWithPort));function Ht(){return(0,i.useEffect)((function(){Qt.on("receive_notification",(function(e){(0,Yt.Am)(e.msg)}))}),[Qt]),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(Yt.Ix,{}),(0,u.jsx)(a.Z,{style:{minHeight:"100vh"},children:(0,u.jsxs)(a.Z,{className:"site-layout",children:[(0,u.jsx)(a.Z.Header,{style:{padding:0,height:"auto"},children:(0,u.jsx)(r.Z,{theme:"dark",mode:"horizontal",items:[{label:(0,u.jsx)(s.rU,{to:"/",children:"Dashboard"}),key:"dashboard"},{label:(0,u.jsx)(s.rU,{to:"/specialization",children:"Specialization "}),key:"specialization"},{label:(0,u.jsx)(s.rU,{to:"/offer",children:"Offers "}),key:"offer"},{label:(0,u.jsx)(s.rU,{to:"/coupon",children:"Coupon"}),key:"coupon"},{label:(0,u.jsx)(s.rU,{to:"/banner",children:"Banner"}),key:"banner"},{label:(0,u.jsx)(s.rU,{to:"/order",children:"Order"}),key:"order"},{label:(0,u.jsx)(s.rU,{to:"/addOn",children:"AddOn"}),key:"addOn"},{label:(0,u.jsx)(s.rU,{to:"/category",children:"Category"}),key:"category"},{label:(0,u.jsx)(s.rU,{to:"/application",children:"Application"}),key:"application"},{label:(0,u.jsx)(s.rU,{to:"/delivery",children:"Delivery"}),key:"delivery"},{label:(0,u.jsx)(s.rU,{to:"/deliveryBoy",children:"Delivery-Boy"}),key:"deliveryBoy"},{label:(0,u.jsx)(s.rU,{to:"/settings",children:"Settings"}),key:"settings"},{label:(0,u.jsx)(s.rU,{to:"/products",children:"Products"}),key:"products"},{label:(0,u.jsx)(s.rU,{to:"/homepageitems",children:"Home Page Items"}),key:"homePageItems"},{label:(0,u.jsx)(s.rU,{to:"/management",children:"User Management"}),key:"management"},{label:null!==p.Z&&void 0!==p.Z&&p.Z.name?p.Z.name:"You",children:[{key:"profile",label:(0,u.jsx)(s.rU,{to:"/profile",children:"Profile"})},{key:"changePassword",label:(0,u.jsx)(s.rU,{to:"/changePassword",children:"Change-Password"})},{key:"Logout",danger:!0,label:"Logout",onClick:function(){window.localStorage.clear(),window.location.reload()}}]}]})}),(0,u.jsx)(a.Z.Content,{children:(0,u.jsx)(l.Z,{style:{borderRadius:"none"},children:(0,u.jsxs)(o.Z5,{children:[(0,u.jsx)(o.AW,{path:"specialization",element:(0,u.jsx)(yt,{}),children:" "}),(0,u.jsx)(o.AW,{path:"offer",element:(0,u.jsx)(tt,{}),children:" "}),(0,u.jsx)(o.AW,{path:"coupon",element:(0,u.jsx)(H,{}),children:" "}),(0,u.jsx)(o.AW,{path:"banner",element:(0,u.jsx)(ge,{})}),(0,u.jsx)(o.AW,{path:"application",element:(0,u.jsx)($,{})}),(0,u.jsx)(o.AW,{path:"category",element:(0,u.jsx)(xe,{})}),(0,u.jsx)(o.AW,{path:"management",element:(0,u.jsx)(ze,{})}),(0,u.jsx)(o.AW,{path:"homepageitems",element:(0,u.jsx)(ot,{})}),(0,u.jsx)(o.AW,{path:"add-new-product",element:(0,u.jsx)(Ke,{})}),(0,u.jsx)(o.AW,{path:"addOn",element:(0,u.jsx)(at,{})}),(0,u.jsx)(o.AW,{path:"order",element:(0,u.jsx)(ft,{})}),(0,u.jsx)(o.AW,{path:"products",element:(0,u.jsx)(Tt,{})}),(0,u.jsx)(o.AW,{path:"delivery",element:(0,u.jsx)(St,{})}),(0,u.jsx)(o.AW,{path:"deliveryBoy",element:(0,u.jsx)(Ft,{})}),(0,u.jsx)(o.AW,{path:"settings",element:(0,u.jsx)(Ut,{})}),(0,u.jsx)(o.AW,{path:"profile",element:(0,u.jsx)(Ot,{})}),(0,u.jsx)(o.AW,{path:"changePassword",element:(0,u.jsx)(Lt,{})}),(0,u.jsx)(o.AW,{path:"",element:(0,u.jsx)(Bt,{})}),(0,u.jsx)(o.AW,{path:"*",element:(0,u.jsx)(h,{})})]})})})]})})]})}}}]);
//# sourceMappingURL=681.df1427f5.chunk.js.map